Directory: myproject

Directory Structure:
```
.
.
├── ./.DS_Store
├── ./.env
├── ./.git
│   ├── ./.git/COMMIT_EDITMSG
│   ├── ./.git/FETCH_HEAD
│   ├── ./.git/HEAD
│   ├── ./.git/ORIG_HEAD
│   ├── ./.git/config
│   ├── ./.git/description
│   ├── ./.git/hooks
│   │   ├── ./.git/hooks/applypatch-msg.sample
│   │   ├── ./.git/hooks/commit-msg.sample
│   │   ├── ./.git/hooks/fsmonitor-watchman.sample
│   │   ├── ./.git/hooks/post-update.sample
│   │   ├── ./.git/hooks/pre-applypatch.sample
│   │   ├── ./.git/hooks/pre-commit.sample
│   │   ├── ./.git/hooks/pre-merge-commit.sample
│   │   ├── ./.git/hooks/pre-push.sample
│   │   ├── ./.git/hooks/pre-rebase.sample
│   │   ├── ./.git/hooks/pre-receive.sample
│   │   ├── ./.git/hooks/prepare-commit-msg.sample
│   │   ├── ./.git/hooks/push-to-checkout.sample
│   │   ├── ./.git/hooks/sendemail-validate.sample
│   │   └── ./.git/hooks/update.sample
│   ├── ./.git/index
│   ├── ./.git/info
│   │   └── ./.git/info/exclude
│   ├── ./.git/logs
│   │   ├── ./.git/logs/HEAD
│   │       ├── ./.git/logs/refs/heads
│   │       │   ├── ./.git/logs/refs/heads/lab2
│   │       │   └── ./.git/logs/refs/heads/master
│   │           └── ./.git/logs/refs/remotes/origin
│   │               ├── ./.git/logs/refs/remotes/origin/lab2
│   │               └── ./.git/logs/refs/remotes/origin/master
│   │   ├── ./.git/objects/00
│   │   │   └── ./.git/objects/00/483d5ec5c90a7493480d0d4f8fb95b70fd6cb9
│   │   ├── ./.git/objects/02
│   │   │   ├── ./.git/objects/02/030923421a9c30a98b465c71447bbeb98df089
│   │   │   ├── ./.git/objects/02/3b37cf4179162c7f316addc2b1c012a47555ab
│   │   │   └── ./.git/objects/02/bab50eea9cb346492dcdc1169cd82023e4a5ec
│   │   ├── ./.git/objects/03
│   │   │   ├── ./.git/objects/03/06c7898674d62df916b948c82cb3ba5136d02f
│   │   │   ├── ./.git/objects/03/9a73af72f1f375c5cb04f6ccfdb38eb44f122a
│   │   │   ├── ./.git/objects/03/b7d655eb9f62e00d6cb333f9f14883d06591a9
│   │   │   └── ./.git/objects/03/c73f84aeb9947f830f86e438c420c1bbf1e355
│   │   ├── ./.git/objects/05
│   │   │   └── ./.git/objects/05/28cea3ede405341796a8388d58209d03a228a7
│   │   ├── ./.git/objects/07
│   │   │   └── ./.git/objects/07/803bd682bae71b420f72353954f1dbdc0be9ae
│   │   ├── ./.git/objects/08
│   │   │   └── ./.git/objects/08/e03fbc163b1333516af92f1cc61a34c129041a
│   │   ├── ./.git/objects/0a
│   │   │   └── ./.git/objects/0a/e4917369bfa7a954fae614c04c1ecdfec82f60
│   │   ├── ./.git/objects/0b
│   │   │   ├── ./.git/objects/0b/9a9840c0fd1de3606b1dbb9feed84e140a7817
│   │   │   └── ./.git/objects/0b/c2ea48cef619799edc8914ecc8c4460009ff51
│   │   ├── ./.git/objects/11
│   │   │   ├── ./.git/objects/11/107811d786ff728373876331c149ae6c5910f8
│   │   │   └── ./.git/objects/11/5ddf850c2903c29e33e7878848f7769c7f4c27
│   │   ├── ./.git/objects/12
│   │   │   └── ./.git/objects/12/455fab691d301ee1aea95ef9a99566a049dc5c
│   │   ├── ./.git/objects/13
│   │   │   └── ./.git/objects/13/ac7ea9e2e24154aced08123fc54e350634e9b8
│   │   ├── ./.git/objects/18
│   │   │   ├── ./.git/objects/18/37362069a680a8b030b3428c4b0f7defb8b561
│   │   │   ├── ./.git/objects/18/b3ee277e9bdbd1c8928d0ddff4cb8955dadddf
│   │   │   └── ./.git/objects/18/f6759f307c627dc4f34536c45f13496f3333e2
│   │   ├── ./.git/objects/1c
│   │   │   └── ./.git/objects/1c/f5354535ca4d133a3ab692e1cfcdf5a043ee23
│   │   ├── ./.git/objects/1e
│   │   │   └── ./.git/objects/1e/9e9cba1486aafff4ca58774704dcc4f32e3c07
│   │   ├── ./.git/objects/1f
│   │   │   └── ./.git/objects/1f/81da72f8824bcba8ccf31b5c5ad95a4fb1a8df
│   │   ├── ./.git/objects/20
│   │   │   └── ./.git/objects/20/fba34f5b4f83462d01c9d8e0df5a2804d18323
│   │   ├── ./.git/objects/24
│   │   │   └── ./.git/objects/24/21ff57a50803b78448e0d20942ce8397190174
│   │   ├── ./.git/objects/25
│   │   │   └── ./.git/objects/25/c7571a4e91b599be95b5a0273cba9fc34e2cbd
│   │   ├── ./.git/objects/28
│   │   │   └── ./.git/objects/28/8d117be16290bdf4016bdb8bfd5ee2b0334139
│   │   ├── ./.git/objects/2e
│   │   │   └── ./.git/objects/2e/f4b139d0296a9fe9e47907d508485889d9ef42
│   │   ├── ./.git/objects/30
│   │   │   └── ./.git/objects/30/5cb587807c7818299e60ab05f865b7caab7121
│   │   ├── ./.git/objects/33
│   │   │   └── ./.git/objects/33/617d2d23a5f1e7d358cc1d018eed1395d985a3
│   │   ├── ./.git/objects/34
│   │   │   └── ./.git/objects/34/18c171127cad54d317f565057d7855d3623ecf
│   │   ├── ./.git/objects/35
│   │   │   ├── ./.git/objects/35/3d4324fd33b252e00019943d8b5b8febe904fd
│   │   │   └── ./.git/objects/35/46dd6d21a68122de2679fd2343bb5824fabdca
│   │   ├── ./.git/objects/36
│   │   │   └── ./.git/objects/36/70745e888e1b2b5366b58398f97d265c7346b3
│   │   ├── ./.git/objects/37
│   │   │   └── ./.git/objects/37/ad245ff76f3319c33a10a6d5d8049b3c4c6ae3
│   │   ├── ./.git/objects/39
│   │   │   └── ./.git/objects/39/98072631ff25ead14b2f3c68de36154071b712
│   │   ├── ./.git/objects/3a
│   │   │   └── ./.git/objects/3a/abe82da6d27118666ad95d7054e4cea50e3c12
│   │   ├── ./.git/objects/3c
│   │   │   └── ./.git/objects/3c/f56642e00c9edb0be84689f948c18f64e63779
│   │   ├── ./.git/objects/40
│   │   │   └── ./.git/objects/40/864c324b87c86c9d295b33ecc8869047039cc8
│   │   ├── ./.git/objects/45
│   │   │   └── ./.git/objects/45/0a883291ce767bf07cc4fa9e4665cac23d5e3d
│   │   ├── ./.git/objects/47
│   │   │   └── ./.git/objects/47/6940fbc00b410c268a302439a49111b1aaace2
│   │   ├── ./.git/objects/4b
│   │   │   └── ./.git/objects/4b/1e61824a8591b225e31d6054a324f32b75274d
│   │   ├── ./.git/objects/4f
│   │   │   ├── ./.git/objects/4f/45d00b721ab48d6513e75e935a7f318968fde8
│   │   │   └── ./.git/objects/4f/6422e73d100df04c56c5f03332ab1a0fb0b72c
│   │   ├── ./.git/objects/53
│   │   │   └── ./.git/objects/53/e203c42b8a7dfa12e1aa3a8c5fd8b51e4fbb47
│   │   ├── ./.git/objects/55
│   │   │   └── ./.git/objects/55/182ba53835f159d9909b5e9a957c99744f90e4
│   │   ├── ./.git/objects/58
│   │   │   └── ./.git/objects/58/bf5f3460a5f3320b8d20a9fe0be5fc59762d8c
│   │   ├── ./.git/objects/5a
│   │   │   └── ./.git/objects/5a/081d7b5ee10dbb911a5713e39a4298925d04d9
│   │   ├── ./.git/objects/5e
│   │   │   ├── ./.git/objects/5e/110b35b0fe7aec9a180087ee93a45017f41e26
│   │   │   ├── ./.git/objects/5e/69b1213f0f16e3d6120d09f3f987a219537187
│   │   │   └── ./.git/objects/5e/be97318ea17fa051255af187321683aec73e36
│   │   ├── ./.git/objects/65
│   │   │   ├── ./.git/objects/65/63c10798bbacdfb3b6505ccc78fef7f78fa3a2
│   │   │   └── ./.git/objects/65/f974d96d964ca44423ba93f28fc749cc9f1768
│   │   ├── ./.git/objects/67
│   │   │   ├── ./.git/objects/67/3774bdacfb9ae578e22686f9acadee4f40c2c8
│   │   │   ├── ./.git/objects/67/49dbe127ee2e51b4cf74bbf42ed724c75a074e
│   │   │   └── ./.git/objects/67/739841246c89fa5dd0db40a3e46fcf6de12902
│   │   ├── ./.git/objects/68
│   │   │   └── ./.git/objects/68/2b96856aea5eb38e796e34a7b77cc21de2c471
│   │   ├── ./.git/objects/69
│   │   │   └── ./.git/objects/69/4323fa4c8382f9effc636c7062ef168bb62da2
│   │   ├── ./.git/objects/6b
│   │   │   └── ./.git/objects/6b/1bf418a87a016b291ce4379616080498f199fb
│   │   ├── ./.git/objects/6d
│   │   │   └── ./.git/objects/6d/3380a2899f2c1bec86c1cf83b54101fbbd816c
│   │   ├── ./.git/objects/70
│   │   │   └── ./.git/objects/70/489a751315c53915643fbf218ee48eb631d988
│   │   ├── ./.git/objects/72
│   │   │   ├── ./.git/objects/72/1ecd9990b3b9d1ea854889bd7b4c97f0325af2
│   │   │   └── ./.git/objects/72/e08c75a44bfe98d8c1eeadf620521e91b1bfca
│   │   ├── ./.git/objects/73
│   │   │   └── ./.git/objects/73/0437a5d6b2e08b8ed6d006ce14562d993830f6
│   │   ├── ./.git/objects/74
│   │   │   ├── ./.git/objects/74/85f344efb8af5bcd4dda85b7f6688de690e939
│   │   │   └── ./.git/objects/74/db6230ee79a3b98782ee131ae5eb0b7ef5865a
│   │   ├── ./.git/objects/77
│   │   │   └── ./.git/objects/77/2f1e4e9ba8f26e110af90ab56d8155e6048822
│   │   ├── ./.git/objects/79
│   │   │   └── ./.git/objects/79/a5d9e1b2ad79c7a8c1a87e8bf18b5f06e87a55
│   │   ├── ./.git/objects/7c
│   │   │   └── ./.git/objects/7c/e503c2dd97ba78597f6ff6e4393132753573f6
│   │   ├── ./.git/objects/7e
│   │   │   └── ./.git/objects/7e/fb726d64ff091183ff1362c5c3ede640b4fd46
│   │   ├── ./.git/objects/7f
│   │   │   └── ./.git/objects/7f/185e89fda41a5b0b87d86118e896da88fa9908
│   │   ├── ./.git/objects/80
│   │   │   └── ./.git/objects/80/4e255893e5feeab29fcb0369742c6a3b68d48d
│   │   ├── ./.git/objects/81
│   │   │   └── ./.git/objects/81/6fcb89298b3914b38250d37dc58bfc3a5127ee
│   │   ├── ./.git/objects/88
│   │   │   └── ./.git/objects/88/2376e6621817dd93c7980d79c28054ec745b0b
│   │   ├── ./.git/objects/8a
│   │   │   └── ./.git/objects/8a/95bce71d4e227f3df062dff27c96d3dc76c0cc
│   │   ├── ./.git/objects/8b
│   │   │   ├── ./.git/objects/8b/9ff878e2e77ea25d220c826a9496ce7da5ad3b
│   │   │   └── ./.git/objects/8b/c7c941d90af2ca4d2f6804fe0669b913a06e05
│   │   ├── ./.git/objects/8c
│   │   │   └── ./.git/objects/8c/70c63c94ddd31dd3b8aea91e78b2048384a8b6
│   │   ├── ./.git/objects/8d
│   │   │   └── ./.git/objects/8d/6a81a8fe657a357bc3b0f9c388a4ec7dc628a3
│   │   ├── ./.git/objects/8f
│   │   │   └── ./.git/objects/8f/c5481817a8bcb5009fb6040d9751a70e5f6d8b
│   │   ├── ./.git/objects/90
│   │   │   └── ./.git/objects/90/d0e58632495e5c1a6ff1756bfef13270d4b351
│   │   ├── ./.git/objects/92
│   │   │   ├── ./.git/objects/92/635602aaa35b2f12492d77b9a8e9aebcef7cf9
│   │   │   └── ./.git/objects/92/bb9a3b2d3b0672cabcfad26835e94407fe1347
│   │   ├── ./.git/objects/95
│   │   │   └── ./.git/objects/95/658e04874c53c81ee40724cfb791af3ba6faa2
│   │   ├── ./.git/objects/9a
│   │   │   ├── ./.git/objects/9a/9e2b94e140b3077ee862e492581021f2120299
│   │   │   ├── ./.git/objects/9a/c8685c11c6367bf93ecf8de86c205f15847c24
│   │   │   └── ./.git/objects/9a/f972babaac2e59a7720f9028c43a3810a3bb1f
│   │   ├── ./.git/objects/9c
│   │   │   └── ./.git/objects/9c/6f1e69cc3008aab265982464af294cbfe9322e
│   │   ├── ./.git/objects/9e
│   │   │   ├── ./.git/objects/9e/2288026a0f7a6ea1763c170cae2611bccfc28e
│   │   │   └── ./.git/objects/9e/54b1d7025115bfe255337e1f0d79a325d590ec
│   │   ├── ./.git/objects/a0
│   │   │   └── ./.git/objects/a0/3d8e3197d0811a9bcfd4dbe0d6c9ad985fc332
│   │   ├── ./.git/objects/a2
│   │   │   └── ./.git/objects/a2/424b9496965175a997042641b086aee0488237
│   │   ├── ./.git/objects/a6
│   │   │   └── ./.git/objects/a6/6a15412f3da07497663303ab188a4347508f23
│   │   ├── ./.git/objects/a8
│   │   │   └── ./.git/objects/a8/428da53df1850edf26b9e13035622ebad217cd
│   │   ├── ./.git/objects/a9
│   │   │   └── ./.git/objects/a9/e2557248eaa3b601a3562b41e4dd86e0ba905d
│   │   ├── ./.git/objects/ab
│   │   │   └── ./.git/objects/ab/0de02c747801c0227714500ae76cfb112b7e22
│   │   ├── ./.git/objects/ac
│   │   │   └── ./.git/objects/ac/6845a8e5a504e9ad187e388e9b65d52369c7fb
│   │   ├── ./.git/objects/af
│   │   │   └── ./.git/objects/af/a5742895552f8549c25e8f8e10ceb9535fd52f
│   │   ├── ./.git/objects/b0
│   │   │   └── ./.git/objects/b0/d0b1c4a7266b82059580f8900ab18773e13f03
│   │   ├── ./.git/objects/b3
│   │   │   └── ./.git/objects/b3/95d1b786a9acfa850a0d258917888fd3a422d0
│   │   ├── ./.git/objects/b6
│   │   │   ├── ./.git/objects/b6/30cfb3e899a28c6288e3fe491dcc6d440f7a69
│   │   │   ├── ./.git/objects/b6/75cd2137a67d53ae2f883f4638d6f78b39cf11
│   │   │   └── ./.git/objects/b6/ac0e13430dfcfddb8e5516cbda3ae2d7288fc3
│   │   ├── ./.git/objects/b8
│   │   │   └── ./.git/objects/b8/763f4b4e9e87f726d9c2d4fef6053a8bac93a8
│   │   ├── ./.git/objects/b9
│   │   │   └── ./.git/objects/b9/99d3ac39ec877772e0931dd644829bc81cdfee
│   │   ├── ./.git/objects/ba
│   │   │   └── ./.git/objects/ba/069b66a91cba14f1c882c982c1d46b130994cf
│   │   ├── ./.git/objects/bc
│   │   │   ├── ./.git/objects/bc/33129ff2ab7c7eff892f5351aceb750aa3dbe9
│   │   │   └── ./.git/objects/bc/9253550c5e1a1d3e812b8b865ef1ff23faec08
│   │   ├── ./.git/objects/be
│   │   │   └── ./.git/objects/be/ba959846992d606cb500e7ee46d1dbba2f18a5
│   │   ├── ./.git/objects/c1
│   │   │   └── ./.git/objects/c1/901223c27ebed7f12bd4e3eb6cd4e02477122a
│   │   ├── ./.git/objects/c3
│   │   │   ├── ./.git/objects/c3/b4306d3bf0fac3a8b7622a51114a83c4a8d50b
│   │   │   └── ./.git/objects/c3/d9629c21890a3b74b61f4564de3017d4b94933
│   │   ├── ./.git/objects/c6
│   │   │   ├── ./.git/objects/c6/3e50e2aa260a6dae0172ea1d74a104b121112f
│   │   │   ├── ./.git/objects/c6/507a12afb6116b5b17adbf60b39e4d493e7d40
│   │   │   ├── ./.git/objects/c6/88207b13d3b52f5c6b522d14115e0b6fa4e7cd
│   │   │   ├── ./.git/objects/c6/88e01f53fb3e419e435a5648c33dcafeae37cd
│   │   │   └── ./.git/objects/c6/a5fe3382def732805805b7ce59a42ff9c34aaf
│   │   ├── ./.git/objects/c8
│   │   │   └── ./.git/objects/c8/67ad5cf746a55692ca23171083b18ba9ce4bcb
│   │   ├── ./.git/objects/ca
│   │   │   ├── ./.git/objects/ca/75762ef2d2e46029cc25e8923b9b9eef42a7aa
│   │   │   └── ./.git/objects/ca/d85b44c8ddfef4c7a456dcdebc4874e9380ca2
│   │   ├── ./.git/objects/cb
│   │   │   ├── ./.git/objects/cb/37ab6a60e7ebb497859b36b73fc7b4e525a373
│   │   │   └── ./.git/objects/cb/3d6310e8ccccfc04ba23117679b00bbd6db34e
│   │   ├── ./.git/objects/cc
│   │   │   └── ./.git/objects/cc/ebeb8b7e7493ab9f8b18e4af3b2fa70f59d472
│   │   ├── ./.git/objects/cd
│   │   │   └── ./.git/objects/cd/44bea0b9737efff61bc93765dacc780ab51f4a
│   │   ├── ./.git/objects/d2
│   │   │   ├── ./.git/objects/d2/1a5f88f15602613df88fa1e398e994044b08ac
│   │   │   └── ./.git/objects/d2/888c470a2f20404f843fa21aefe583ba1b45cd
│   │   ├── ./.git/objects/d8
│   │   │   └── ./.git/objects/d8/5539118610c5a91a3b371763157a4fe220aa94
│   │   ├── ./.git/objects/db
│   │   │   ├── ./.git/objects/db/42944db97488f56c1faeb3bdb13a3dbdc2d75f
│   │   │   └── ./.git/objects/db/c5353ce3f74af2505a151431f28c21b56a781b
│   │   ├── ./.git/objects/dc
│   │   │   └── ./.git/objects/dc/91d3b7a6bb79210569ece2c67aef1f3735a44b
│   │   ├── ./.git/objects/de
│   │   │   ├── ./.git/objects/de/65bca72ccf6772ed1bf04977d2d913ab55e365
│   │   │   └── ./.git/objects/de/85a85c16c6d4c5bc49b3801b809b45e3f5299e
│   │   ├── ./.git/objects/df
│   │   │   ├── ./.git/objects/df/e73170153b7f479db31c70c663648df6a9eb5d
│   │   │   └── ./.git/objects/df/f3aa55e8f76cb8f48271d5eb9a1c9740389eae
│   │   ├── ./.git/objects/e0
│   │   │   └── ./.git/objects/e0/c6a456c6d664dae7d1805186096d71f4433c51
│   │   ├── ./.git/objects/e4
│   │   │   └── ./.git/objects/e4/fbe16bdb4f44e19e3a7a531b753b8d0c2480aa
│   │   ├── ./.git/objects/e6
│   │   │   └── ./.git/objects/e6/9de29bb2d1d6434b8b29ae775ad8c2e48c5391
│   │   ├── ./.git/objects/e7
│   │   │   └── ./.git/objects/e7/4998bec91c0de5b1f157a9acf59090d2de4252
│   │   ├── ./.git/objects/e8
│   │   │   ├── ./.git/objects/e8/0c4a77a961a478959d3ab968d48aa2714be03e
│   │   │   ├── ./.git/objects/e8/3603f2ead938894eb18b34cfab0e21a399a25e
│   │   │   ├── ./.git/objects/e8/9acb14f7a1d98517c9cd6b783572cf7cf4ea18
│   │   │   ├── ./.git/objects/e8/b6c75593377c0ee0dd39b0eea68b11dd9e0159
│   │   │   └── ./.git/objects/e8/d9391796b2cd1559da67742ea273db8dcacd6e
│   │   ├── ./.git/objects/e9
│   │   │   ├── ./.git/objects/e9/57dc452d3f819a76789dee1d99c66d669e9da3
│   │   │   └── ./.git/objects/e9/b3d0e1208a8cbf9976f970b84871b023af88fd
│   │   ├── ./.git/objects/ea
│   │   │   └── ./.git/objects/ea/6fbf4314006e71d350a93b84f2e0c38d8b1408
│   │   ├── ./.git/objects/ed
│   │   │   ├── ./.git/objects/ed/327d22f5ad028ff7fae6c967945e1da8438a82
│   │   │   └── ./.git/objects/ed/ddf20468ccbec4db14d5f8ba9cf88c8f07a93a
│   │   ├── ./.git/objects/f0
│   │   │   └── ./.git/objects/f0/fb4f4cdf1f1b8618957491c28e3e51040276ac
│   │   ├── ./.git/objects/f1
│   │   │   └── ./.git/objects/f1/fd6b9909fd99af730d7f3f28da64d83722dc61
│   │   ├── ./.git/objects/f4
│   │   │   └── ./.git/objects/f4/5dd328e556170f3a94ae301228337e21db4d29
│   │   ├── ./.git/objects/f6
│   │   │   └── ./.git/objects/f6/26d5d0ec70a28f8ba5739afab4642213641b71
│   │   ├── ./.git/objects/fc
│   │   │   └── ./.git/objects/fc/a0122058438f92d397f5bf075f5b44b1bebc62
│   │   ├── ./.git/objects/fd
│   │   │   ├── ./.git/objects/fd/6c8b95ce1b8f6147ac841e98ff66ecb73153e4
│   │   │   └── ./.git/objects/fd/a01c2d548fcb41da17195f4ddef7b24c0238ad
│   │   ├── ./.git/objects/fe
│   │   │   └── ./.git/objects/fe/9211150e34e282aeac5dfd2c9f09b200c76e24
│   │   ├── ./.git/objects/ff
│   │   │   └── ./.git/objects/ff/ffa7dbb005aafbcb08a19373d15d6014c15149
│       ├── ./.git/refs/heads
│       │   ├── ./.git/refs/heads/lab2
│       │   └── ./.git/refs/heads/master
│       │   └── ./.git/refs/remotes/origin
│       │       ├── ./.git/refs/remotes/origin/lab2
│       │       └── ./.git/refs/remotes/origin/master
├── ./README.md
├── ./app
│   ├── ./app/__init__.py
│   ├── ./app/admin.py
│   ├── ./app/apps.py
│   ├── ./app/context_processors.py
│   ├── ./app/filters.py
│   ├── ./app/forms.py
│   ├── ./app/migrations
│   │   ├── ./app/migrations/0001_initial.py
│   │   ├── ./app/migrations/0002_appuser_is_active_employee_is_active.py
│   │   ├── ./app/migrations/0003_auto_20241127_0421.py
│   │   ├── ./app/migrations/0004_remove_appuser_is_active_remove_employee_is_active_and_more.py
│   │   ├── ./app/migrations/0005_remove_employee_age_remove_employee_full_name_and_more.py
│   │   ├── ./app/migrations/0006_alter_testresult_employee.py
│   │   ├── ./app/migrations/0007_testresult_approved_testdeletionrequest.py
│   │   ├── ./app/migrations/0008_employee_is_fired_alter_testresult_test.py
│   │   ├── ./app/migrations/0009_alter_answer_image_alter_question_image.py
│   │   └── ./app/migrations/__init__.py
│   ├── ./app/models.py
│   ├── ./app/serializers.py
│   ├── ./app/templates
│   │   ├── ./app/templates/add_answer.html
│   │   ├── ./app/templates/add_employee.html
│   │   ├── ./app/templates/add_question.html
│   │   ├── ./app/templates/add_test.html
│   │   ├── ./app/templates/add_user.html
│   │   ├── ./app/templates/admin_test_results.html
│   │   ├── ./app/templates/approve_test_deletion.html
│   │   ├── ./app/templates/approve_test_result.html
│   │   ├── ./app/templates/base.html
│   │   ├── ./app/templates/edit_answer.html
│   │   ├── ./app/templates/edit_question.html
│   │   ├── ./app/templates/edit_test.html
│   │   ├── ./app/templates/employee_detail.html
│   │   ├── ./app/templates/employee_list.html
│   │   ├── ./app/templates/index.html
│   │   ├── ./app/templates/messages.html
│   │   ├── ./app/templates/navbar.html
│   │   ├── ./app/templates/pending_test_results.html
│   │   ├── ./app/templates/request_test_deletion.html
│   │   ├── ./app/templates/set_user.html
│   │   ├── ./app/templates/start_test.html
│   │   ├── ./app/templates/test_deletion_requests.html
│   │   ├── ./app/templates/test_list.html
│   │   ├── ./app/templates/test_result_detail.html
│   │   ├── ./app/templates/test_results.html
│   │   ├── ./app/templates/user_detail.html
│   │   └── ./app/templates/user_list.html
│   ├── ./app/templatetags
│   │   ├── ./app/templatetags/__init__.py
│   │   └── ./app/templatetags/app_extras.py
│   ├── ./app/tests.py
│   ├── ./app/urls.py
│   └── ./app/views.py
├── ./manage.py
│   ├── ./media/answer_images
│   │   └── ./media/answer_images/4eb2b2b6962f9815f60feb4c27c84cd0.jpg
│   ├── ./media/employee_photos
│   │   └── ./media/employee_photos/8dc817080af13b2aa733ea1c8ff606e6.jpg
│   └── ./media/question_images
│       ├── ./media/question_images/photo_2024-10-16_17-27-22.jpg
│       ├── ./media/question_images/question1.jpg
│       ├── ./media/question_images/question2.jpg
│       ├── ./media/question_images/question3.jpg
│       └── ./media/question_images/question4.jpg
└── ./myproject
    ├── ./myproject/__init__.py
    ├── ./myproject/asgi.py
    ├── ./myproject/settings.py
    ├── ./myproject/urls.py
    └── ./myproject/wsgi.py
```

Contents of .DS_Store:
```
[Could not decode file contents]

```

Contents of README.md:
```
# Курсовая работа по предмету Базы Данных

Представлен проект курсовой работы по предмету Базы данных

## Требования

- **Python** версии 3.8 и выше
- **PostgreSQL** для базы данных

## Установка

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/VGorHub/DB_Course_Work.git
    cd myproject
    ```

2. **Создайте и активируйте виртуальное окружение:**

    ```bash
    python -m venv venv
    ```

    - **Для Linux/macOS:**

        ```bash
        source venv/bin/activate
        ```

    - **Для Windows:**

        ```bash
        venv\Scripts\activate
        ```

3. **Установите зависимости:**

    Выполните команду:

    ```bash
    pip install -r requirements.txt
    ```

## Настройка

1. **Настройте файл `.env`:**

    В корневой директории проекта создайте файл `.env` и заполните его следующими параметрами:

    ```env
    DB_ENGINE=django.db.backends.postgresql
    DB_NAME=DB2
    DB_USER=postgres
    DB_PASSWORD=ваш_пароль
    DB_HOST=localhost
    DB_PORT=5432
    ```

2. **Примените миграции базы данных:**

    ```bash
    python manage.py migrate
    ```

3. **Создайте суперпользователя для доступа к административной панели:**

    ```bash
    python manage.py createsuperuser
    ```

    Следуйте инструкциям на экране для создания учетной записи суперпользователя.

## Запуск проекта

1. **Запустите сервер разработки:**

    ```bash
    python manage.py runserver
    ```

2. **Откройте браузер и перейдите по адресу:**

    ```
    http://127.0.0.1:8000/
    ```

## Использование

- **Административная панель:**

    Доступна по адресу `http://127.0.0.1:8000/admin/`. Войдите, используя учетные данные суперпользователя.

- **API Endpoints:**

    - Список пользователей: `http://127.0.0.1:8000/api/users/`
    - Детали пользователя: `http://127.0.0.1:8000/api/users/<id>/`
    - Список сотрудников: `http://127.0.0.1:8000/api/employees/`
    - Детали сотрудника: `http://127.0.0.1:8000/api/employees/<id>/`


## Контакты

Если у вас есть вопросы или предложения, пожалуйста, свяжитесь с [vova-gorohov04@mail.ru](mailto:vova-gorohov04@mail.ru).

---

**Примечание:** Убедитесь, что PostgreSQL установлен и настроен на вашем компьютере. Создайте базу данных `DB2` или измените параметры подключения в файле `.env` согласно вашим настройкам.


# Про безопасность в Django


### Содержание

1. [Надёжное хранение паролей](#1-надежное-хранение-паролей)
   - [Хэширование паролей](#хэширование-паролей)
   - [Используемые алгоритмы хэширования](#используемые-алгоритмы-хэширования)
2. [Защита от распространённых веб-уязвимостей](#2-защита-от-распространённых-веб-уязвимостей)
   - [CSRF (Cross-Site Request Forgery)](#csrf-cross-site-request-forgery)
   - [XSS (Cross-Site Scripting)](#xss-cross-site-scripting)
   - [SQL Injection](#sql-injection)
3. [Безопасное управление сессиями](#3-безопасное-управление-сессиями)
   - [Хранение сессий](#хранение-сессий)
   - [Безопасность куки](#безопасность-куки)
4. [Гибкая система аутентификации и авторизации](#4-гибкая-система-аутентификации-и-авторизации)
   - [Пользователи и группы](#пользователи-и-группы)
   - [Разрешения](#разрешения)
5. [Регулярные обновления и поддержка сообщества](#5-Регулярные-обновления-и-поддержка-сообщества)
6. [Дополнительные меры безопасности](#6-дополнительные-мера-безопасности)
   - [SSL/HTTPS](#sslhttps)
   - [Content Security Policy (CSP)](#content-security-policy-csp)
   - [HTTP Strict Transport Security (HSTS)](#http-strict-transport-security-hsts)
   - [Защита от Clickjacking](#защита-от-clickjacking)
7. [Хранение личной информации пользователей](#7-хранение-личной-информации-пользователей)
   - [Риски хранения личных данных в общей базе](#риски-хранения-личных-данных-в-общей-базе)
   - [Меры по защите личных данных в Django](#меры-по-защите-личных-данных-в-django)
   - [Специализированные базы данных для PII](#специализированные-базы-данных-для-pii)
8. [Передача паролей в заголовках (Headers)](#8-передача-паролей-в-заголовках-headers)
9. [Контейнеризация и изоляция приложений](#9-контейнеризация-и-изоляция-приложений)
10. [Логи и аудит доступа](#10-логи-и-аудит-доступа)
11. [Заключение](#11-заключение)
12. [Ссылки на авторитетные источники](#12-ссылки-на-авторитетные-источники)

---

### 1. Надёжное хранение паролей

#### Хэширование паролей

Django использует **хэширование паролей** для обеспечения их безопасности. Вместо хранения паролей в явном виде, Django сохраняет их хэшированные версии. Хэширование — это процесс преобразования пароля в фиксированный набор символов, который невозможно обратить в исходный пароль.

**Основные преимущества хэширования:**

- **Необратимость:** Даже если злоумышленник получит доступ к хэшам, восстановление исходных паролей чрезвычайно затруднено.
- **Защита от радужных таблиц:** Использование соли (salt) делает невозможным использование предварительно вычисленных хэш-таблиц для взлома паролей.

#### Используемые алгоритмы хэширования

По умолчанию Django использует **PBKDF2** с **SHA256** в качестве хэш-функции. Однако, фреймворк поддерживает и другие алгоритмы, такие как **Argon2** и **BCrypt**. Разработчик может настроить список хэшеров в `settings.py`:

```python
PASSWORD_HASHERS = [
    'django.contrib.auth.hashers.Argon2PasswordHasher',
    'django.contrib.auth.hashers.BCryptSHA256PasswordHasher',
    'django.contrib.auth.hashers.PBKDF2PasswordHasher',
    'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher',
]
```

**PBKDF2** (Password-Based Key Derivation Function 2) обладает следующими характеристиками:

- **Соль:** Каждому паролю добавляется уникальная случайная строка (соль), предотвращающая атаки с использованием радужных таблиц.
- **Итерации:** Выполняется большое количество итераций хэширования (по умолчанию 260,000), что усложняет атаки методом перебора.

**Argon2** и **BCrypt** предлагают повышенную стойкость к современным атакам:

- **Argon2:** Победитель конкурса Password Hashing Competition, обеспечивает высокую степень защиты благодаря настройкам времени и памяти, что делает его устойчивым к атакам с использованием специализированного оборудования.
- **BCrypt:** Адаптивный алгоритм, который позволяет увеличивать сложность хэширования по мере роста вычислительной мощности.

**Источники:**

- [Django Documentation on Password Management](https://docs.djangoproject.com/en/stable/topics/auth/passwords/)
- [OWASP Password Storage Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html)

---

### 2. Защита от распространённых веб-уязвимостей

Django предоставляет встроенные механизмы защиты от наиболее распространённых веб-уязвимостей, соответствуя рекомендациям [OWASP Top Ten](https://owasp.org/www-project-top-ten/).

#### CSRF (Cross-Site Request Forgery)

**CSRF** — это атака, при которой злоумышленник заставляет пользователя выполнить нежелательное действие на сайте, где тот аутентифицирован.

**Механизмы защиты Django:**

- **Middleware:** `django.middleware.csrf.CsrfViewMiddleware` автоматически проверяет наличие и валидность CSRF-токена в каждом POST-запросе.
- **CSRF-токены:** В шаблонах Django используется тег `{% csrf_token %}`, который вставляет уникальный токен в формы.

**Дополнительные настройки:**

- **CSRF_COOKIE_SECURE:** Устанавливает флаг `Secure` для CSRF-куки, позволяя передавать куки только по HTTPS.
- **CSRF_COOKIE_HTTPONLY:** Предотвращает доступ к CSRF-куки через JavaScript, снижая риск XSS-атак.

**Источники:**

- [Django CSRF Protection](https://docs.djangoproject.com/en/stable/ref/csrf/)
- [OWASP CSRF Prevention](https://owasp.org/www-community/attacks/csrf)

#### XSS (Cross-Site Scripting)

**XSS** позволяет злоумышленнику внедрять вредоносные скрипты в веб-страницы, просматриваемые другими пользователями.

**Механизмы защиты Django:**

- **Экранирование вывода:** По умолчанию, все переменные в шаблонах автоматически экранируются, предотвращая внедрение вредоносных скриптов.
- **Безопасный шаблонизатор:** Использование шаблонизатора Django, который по умолчанию обрабатывает вывод данных безопасным образом.

**Дополнительные меры:**

- **Использование фильтра `|safe` только при необходимости:** Это позволяет разработчику явно указывать, какие данные могут содержать HTML-код.

**Источники:**

- [Django Template System](https://docs.djangoproject.com/en/stable/topics/templates/)
- [OWASP XSS Prevention](https://owasp.org/www-community/attacks/xss/)

#### SQL Injection

**SQL Injection** — это атака, при которой злоумышленник вставляет или изменяет SQL-запросы, выполняемые приложением, с целью получения несанкционированного доступа к данным.

**Механизмы защиты Django:**

- **ORM (Object-Relational Mapping):** Django ORM автоматически параметризует запросы, предотвращая SQL-инъекции.
- **Использование безопасных методов:** Методы, такие как `filter()`, `exclude()`, и `get()`, не позволяют напрямую внедрять SQL-код.

**Пример безопасного запроса:**

```python
from myapp.models import User
user = User.objects.filter(username=username).first()
```

В этом примере `username` автоматически экранируется, предотвращая инъекции.

**Источники:**

- [Django ORM Documentation](https://docs.djangoproject.com/en/stable/topics/db/)
- [OWASP SQL Injection Prevention](https://owasp.org/www-community/attacks/SQL_Injection)

---

### 3. Безопасное управление сессиями

#### Хранение сессий

Django предоставляет несколько способов хранения сессий:

- **Database-backed sessions:** Хранение сессий в базе данных (по умолчанию).
- **Cached sessions:** Использование кэша (например, Redis) для хранения сессий.
- **File-based sessions:** Хранение сессий в файлах на сервере.
- **Signed cookies:** Хранение данных сессии непосредственно в куках, подписанных с использованием секретного ключа.

**Настройки сессий в `settings.py`:**

```python
SESSION_ENGINE = 'django.contrib.sessions.backends.db'  # По умолчанию
```

#### Безопасность куки

Куки, используемые для управления сессиями, должны быть защищены от несанкционированного доступа и атак.

**Ключевые параметры:**

- **SESSION_COOKIE_SECURE:** Устанавливает флаг `Secure`, что позволяет передавать куки только по HTTPS.

  ```python
  SESSION_COOKIE_SECURE = True
  ```

- **SESSION_COOKIE_HTTPONLY:** Устанавливает флаг `HttpOnly`, предотвращая доступ к кукам через JavaScript, что снижает риск XSS-атак.

  ```python
  SESSION_COOKIE_HTTPONLY = True
  ```

- **SESSION_COOKIE_SAMESITE:** Устанавливает атрибут `SameSite`, предотвращая отправку куки в кросс-сайтовых запросах, что защищает от CSRF.

  ```python
  SESSION_COOKIE_SAMESITE = 'Lax'  # или 'Strict'
  ```

**Источники:**

- [Django Session Framework](https://docs.djangoproject.com/en/stable/topics/http/sessions/)
- [OWASP Session Management](https://owasp.org/www-project-cheat-sheets/cheatsheets/Session_Management_Cheat_Sheet.html)

---

### 4. Гибкая система аутентификации и авторизации

#### Пользователи и группы

Django предоставляет встроенные модели для управления пользователями и группами.

- **Модель `User`:** Включает основные атрибуты и методы для управления пользователями, такие как `username`, `password`, `email`, и т.д.
- **Группы (`Group`):** Позволяют объединять пользователей с общими правами доступа, упрощая управление разрешениями.

**Пример создания группы:**

```python
from django.contrib.auth.models import Group, Permission

# Создание новой группы
group = Group.objects.create(name='Editors')

# Добавление разрешений в группу
permission = Permission.objects.get(codename='change_article')
group.permissions.add(permission)
```

#### Разрешения

Django использует систему разрешений для управления доступом к различным частям приложения.

- **Предопределённые разрешения:** Django автоматически создаёт разрешения `add`, `change`, `delete` и `view` для каждой модели.
- **Пользовательские разрешения:** Разработчик может создавать собственные разрешения для более тонкого контроля доступа.

**Пример создания пользовательского разрешения:**

```python
from django.contrib.auth.models import Permission
from django.contrib.contenttypes.models import ContentType
from myapp.models import MyModel

content_type = ContentType.objects.get_for_model(MyModel)
permission = Permission.objects.create(
    codename='can_publish',
    name='Can Publish Articles',
    content_type=content_type,
)
```

**Источники:**

- [Django Authentication Documentation](https://docs.djangoproject.com/en/stable/topics/auth/)
- [Django Permissions](https://docs.djangoproject.com/en/stable/topics/auth/default/#permissions-and-authorization)

---

### 5. Регулярные обновления и поддержка сообщества

Django активно поддерживается и регулярно обновляется с учётом новых требований безопасности. Команда разработчиков Django оперативно реагирует на выявленные уязвимости и выпускает патчи безопасности.

**Преимущества:**

- **Регулярные релизы:** Новые версии Django включают улучшения безопасности и исправления уязвимостей.
- **Активное сообщество:** Большое сообщество разработчиков и пользователей, которые участвуют в тестировании, выявлении и исправлении проблем.
- **Документация по безопасности:** Подробные руководства и рекомендации по обеспечению безопасности приложений.

**Источники:**

- [Django Security Releases](https://www.djangoproject.com/weblog/)

---

### 6. Дополнительные меры безопасности

#### SSL/HTTPS

**SSL (Secure Sockets Layer)** и **TLS (Transport Layer Security)** обеспечивают шифрование данных при передаче между клиентом и сервером, защищая их от перехвата и модификации.

**Типы сертификатов:**

- **Сертификаты DV (Domain Validation):** Проверяют только право собственности на домен.
- **Сертификаты OV (Organization Validation):** Дополнительно проверяют организацию.
- **Сертификаты EV (Extended Validation):** Предоставляют максимальный уровень доверия и отображаются зелёной строкой в браузерах.

**Рекомендуемые практики:**

- **Использование современных протоколов TLS:** TLS 1.2 и выше, избегая устаревших версий SSL и TLS.
- **Сильные шифры:** Использование современных и безопасных шифров, таких как AES-256.
- **Настройки Django для HTTPS:**

  ```python
  SECURE_SSL_REDIRECT = True  # Перенаправление всех HTTP-запросов на HTTPS
  CSRF_COOKIE_SECURE = True
  SESSION_COOKIE_SECURE = True
  ```

**Источники:**

- [Django Security Settings](https://docs.djangoproject.com/en/stable/topics/security/)
- [OWASP Transport Layer Protection](https://owasp.org/www-project-top-ten/2017/A6_2017-Security_Misconfiguration.html)

#### Content Security Policy (CSP)

**CSP** позволяет ограничить ресурсы, которые могут быть загружены на веб-страницу, снижая риск XSS и других атак.

**Настройка CSP в Django:**

Использование библиотеки `django-csp` для управления CSP-заголовками.

**Пример настройки в `settings.py`:**

```python
CSP_DEFAULT_SRC = ("'self'",)
CSP_SCRIPT_SRC = ("'self'", 'https://trusted.cdn.com')
CSP_STYLE_SRC = ("'self'", 'https://trusted.cdn.com')
```

**Источники:**

- [Django CSP Documentation](https://django-csp.readthedocs.io/en/latest/)
- [OWASP Content Security Policy](https://owasp.org/www-project-secure-headers/#content-security-policy-csp)

#### HTTP Strict Transport Security (HSTS)

**HSTS** заставляет браузеры автоматически использовать HTTPS для всех запросов к домену, предотвращая downgrade-атаки.

**Настройка HSTS в Django:**

```python
SECURE_HSTS_SECONDS = 31536000  # Время в секундах (1 год)
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
```

**Источники:**

- [Django Security Middleware](https://docs.djangoproject.com/en/stable/ref/middleware/#module-django.middleware.security)
- [OWASP HSTS](https://owasp.org/www-project-secure-headers/#http-strict-transport-security-hsts)

#### Защита от Clickjacking

**Clickjacking** — атака, при которой пользователь обманывается для выполнения нежелательных действий на сайте через iframe.

**Механизмы защиты Django:**

- **X-Frame-Options:** Заголовок, предотвращающий отображение страниц в iframe.

**Настройка в `settings.py`:**

```python
X_FRAME_OPTIONS = 'DENY'  # Или 'SAMEORIGIN'
```

**Источники:**

- [Django Clickjacking Protection](https://docs.djangoproject.com/en/stable/ref/middleware/#django.middleware.clickjacking.XFrameOptionsMiddleware)
- [OWASP Clickjacking Defense](https://owasp.org/www-community/attacks/Clickjacking)

---

### 7. Хранение личной информации пользователей

Хранение личной информации пользователей (PII - Personally Identifiable Information) требует особого внимания к безопасности и соответствию нормативным требованиям. В этом разделе мы рассмотрим примеры мест и способов хранения PII, а также лучшие практики для обеспечения их защиты.

#### Риски хранения личных данных в общей базе

Хранение личной информации (PII) в общей базе данных может представлять следующие риски:

- **Единая точка отказа:** Утечка базы данных приведёт к компрометации всей PII.
- **Необходимость строгого контроля доступа:** Требуется ограничить доступ к базе данных только необходимыми сервисами и пользователями.
- **Соответствие нормативным требованиям:** Законодательства (например, GDPR, HIPAA) требуют соблюдения строгих мер защиты PII.

#### Меры по защите личных данных в Django

**Шифрование данных:**

- **Транзитное шифрование:** Использование HTTPS для защиты данных при передаче между клиентом и сервером.
- **Шифрование на уровне базы данных:** Использование шифрования для хранения чувствительных данных. Это может быть реализовано с помощью сторонних библиотек, таких как `django-encrypted-model-fields` или `django-fernet-fields`.

**Пример использования `django-fernet-fields`:**

1. **Установка библиотеки:**

   ```bash
   pip install django-fernet-fields
   ```

2. **Настройка ключа шифрования:**

   ```python
   # settings.py

   FERNET_KEYS = [
       'your-fernet-key-1',
       'your-fernet-key-2',  # Для ротации ключей
   ]
   ```

3. **Использование зашифрованных полей в моделях:**

   ```python
   from django.db import models
   from fernet_fields import EncryptedCharField

   class UserProfile(models.Model):
       user = models.OneToOneField(User, on_delete=models.CASCADE)
       ssn = EncryptedCharField(max_length=11)  # Зашифрованное поле для SSN
   ```

**Разделение данных:**

- **Логические разделения:** Использование отдельных моделей и приложений для хранения PII.
- **Физические разделения:** Размещение PII в отдельных базах данных или на отдельных серверах с усиленными мерами безопасности.

**Минимизация данных:**

- **Сбор только необходимых данных:** Хранение только тех данных, которые необходимы для функционирования приложения.
- **Анонимизация:** Удаление или маскирование данных, которые могут идентифицировать пользователя.

**Управление доступом:**

- **Роли и разрешения:** Использование системы разрешений Django для ограничения доступа к PII.
- **Аудит доступа:** Ведение логов доступа к чувствительным данным для мониторинга и обнаружения подозрительной активности.

**Источники:**

- [Django Encrypted Fields](https://github.com/fernet/django-fernet-fields)
- [OWASP Data Protection](https://owasp.org/www-project-data-protection/)

#### Специализированные базы данных для PII

Использование специализированных хранилищ для PII может повысить уровень безопасности, особенно для крупных и критически важных приложений.

**Хранилища секретов (Secrets Managers):**

- **AWS Secrets Manager**
- **HashiCorp Vault**

Эти сервисы предоставляют безопасное хранение конфиденциальных данных с контролем доступа и автоматическим обновлением секретов.

**Пример интеграции с HashiCorp Vault:**

```python
import hvac
from django.conf import settings

client = hvac.Client(url=settings.VAULT_URL, token=settings.VAULT_TOKEN)

# Получение секрета
secret = client.secrets.kv.v2.read_secret_version(path='pii/user_data')
user_ssn = secret['data']['data']['ssn']
```

**Изолированные базы данных:**

- **Физическая изоляция:** Размещение PII в отдельных базах данных, доступ к которым ограничен.
- **Усиленные меры безопасности:** Применение дополнительных мер защиты, таких как многофакторная аутентификация и шифрование на уровне диска.

**Источники:**

- [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/)
- [HashiCorp Vault](https://www.vaultproject.io/)
- [OWASP Data Minimization](https://owasp.org/www-project-data-protection/)

---

### 8. Передача паролей в заголовках (Headers)

Передача паролей в заголовках HTTP-запросов (например, в заголовке `Authorization`) может вызывать вопросы по поводу безопасности. Однако, при соблюдении определённых условий, это безопасный метод передачи данных.

#### Почему передача пароля в заголовках безопасна

1. **Использование HTTPS:**
   - **Шифрование данных:** При использовании HTTPS все данные, включая заголовки, шифруются с помощью TLS, что предотвращает перехват и чтение данных злоумышленниками.
   - **Целостность данных:** TLS обеспечивает целостность передаваемых данных, предотвращая их модификацию в пути.

2. **Стандарты и протоколы:**
   - **Basic Authentication:** Согласно [RFC 7617](https://tools.ietf.org/html/rfc7617), пароли передаются в заголовке `Authorization` в формате Base64. Хотя Base64 не является шифрованием, использование HTTPS обеспечивает безопасность передачи.
   - **Bearer Tokens:** Использование токенов доступа в заголовках `Authorization: Bearer <token>` также безопасно при использовании HTTPS.

3. **Защита от утечек:**
   - **HttpOnly и Secure куки:** Если пароли хранятся в куках, установка флагов `HttpOnly` и `Secure` предотвращает доступ к ним через JavaScript и передачу только по HTTPS.
   - **CSP:** Использование Content Security Policy снижает риск утечек данных через XSS-атаки.

4. **Минимизация хранения паролей:**
   - **Не храните пароли:** Сервер не хранит пароли в явном виде, а только их хэшированные версии, что снижает риск утечек.

**Лучшие практики:**

- **Используйте HTTPS по умолчанию:** Обеспечьте, чтобы все запросы, особенно те, которые содержат конфиденциальные данные, передавались по защищённому каналу.
- **Избегайте передачи паролей в URL:** Параметры URL могут быть сохранены в журналах сервера или истории браузера, что повышает риск утечек.
- **Используйте токены вместо паролей:** По возможности используйте механизмы аутентификации на основе токенов (например, JWT), которые имеют ограниченный срок действия и могут быть отозваны.

**Источники:**

- [RFC 7617: The 'Basic' HTTP Authentication Scheme](https://tools.ietf.org/html/rfc7617)
- [OWASP Authentication Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html)

---

### 9. Контейнеризация и изоляция приложений

Использование контейнеров (например, Docker) и оркестраторов (например, Kubernetes) позволяет изолировать приложения и базы данных, уменьшая риски распространения угроз.

**Преимущества:**

- **Изоляция процессов:** Ограничение взаимодействия между компонентами приложения.
- **Упрощённое управление конфигурациями безопасности:** Возможность применять общие политики безопасности к контейнерам.
- **Повышенная гибкость и масштабируемость:** Лёгкость развертывания и масштабирования безопасных окружений.

**Пример Docker Compose для изолированной базы данных PII:**

```yaml
version: '3.8'

services:
  web:
    image: your_django_app
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgres://user:password@pii_db:5432/pii_db
    depends_on:
      - pii_db

  pii_db:
    image: postgres:13
    environment:
      POSTGRES_DB: pii_db
      POSTGRES_USER: pii_user
      POSTGRES_PASSWORD: secure_password
    volumes:
      - pii_db_data:/var/lib/postgresql/data
    networks:
      - backend

volumes:
  pii_db_data:

networks:
  backend:
    driver: bridge
```

**Источники:**

- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Kubernetes Security](https://kubernetes.io/docs/concepts/security/overview/)

---

### 10. Логи и аудит доступа

Ведение детализированных логов доступа к PII и проведение регулярных аудитов помогают обнаруживать и реагировать на подозрительную активность.

**Преимущества:**

- **Обнаружение угроз:** Возможность своевременного обнаружения и реагирования на попытки несанкционированного доступа.
- **Соответствие нормативам:** Многие стандарты безопасности требуют ведения логов и проведения аудитов.
- **Прозрачность:** Повышение доверия пользователей через прозрачное управление данными.

**Реализация в Django:**

Настройка логирования в `settings.py`:

```python
# settings.py

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'pii_file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': '/var/log/django/pii_access.log',
        },
    },
    'loggers': {
        'pii_access': {
            'handlers': ['pii_file'],
            'level': 'INFO',
            'propagate': False,
        },
    },
}
```

Использование логгера в коде:

```python
import logging

pii_logger = logging.getLogger('pii_access')

def access_pii(user, pii_data):
    pii_logger.info(f"User {user.id} accessed PII: {pii_data}")
    # Логика доступа к PII
```

**Источники:**

- [Django Logging Documentation](https://docs.djangoproject.com/en/stable/topics/logging/)
- [OWASP Logging Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html)

---

### 11. Заключение

Встроенная система авторизации Django обеспечивает высокий уровень безопасности благодаря использованию современных алгоритмов хэширования паролей, защите от распространённых веб-уязвимостей, безопасному управлению сессиями и гибкой системе аутентификации и авторизации. Дополнительные меры безопасности, такие как использование HTTPS с современными сертификатами, CSP, HSTS и другие заголовки безопасности, значительно повышают уровень защиты приложений.

Хранение личной информации пользователей в общей базе данных может быть безопасным при условии правильной конфигурации, шифрования данных, строгого контроля доступа и соблюдения лучших практик безопасности. Однако для высокочувствительных данных использование специализированных хранилищ может предоставить дополнительный уровень защиты.

**Таким образом, при правильной настройке и соблюдении рекомендаций по безопасности, встроенная система авторизации Django является надёжным и безопасным выбором для большинства проектов. Дополнительные меры безопасности, такие как использование специализированных баз данных для PII, могут быть применены в зависимости от специфических требований и уровня чувствительности данных.**

---

### 12. Ссылки на источники

1. **Django Documentation:**
   - [Security](https://docs.djangoproject.com/en/stable/topics/security/)
   - [Password Management](https://docs.djangoproject.com/en/stable/topics/auth/passwords/)
   - [Session Framework](https://docs.djangoproject.com/en/stable/topics/http/sessions/)
   - [Middleware Reference](https://docs.djangoproject.com/en/stable/ref/middleware/)
   - [Multiple Databases](https://docs.djangoproject.com/en/stable/topics/db/multi-db/)
   - [Logging](https://docs.djangoproject.com/en/stable/topics/logging/)
   
2. **OWASP (Open Web Application Security Project):**
   - [OWASP Top Ten](https://owasp.org/www-project-top-ten/)
   - [OWASP Cheat Sheets](https://cheatsheetseries.owasp.org/)
   - [OWASP Password Storage Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html)
   - [OWASP Authentication Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html)
   - [OWASP Data Protection](https://owasp.org/www-project-data-protection/)
   - [OWASP Encryption Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Encryption_Cheat_Sheet.html)
   - [OWASP Clickjacking Defense](https://owasp.org/www-community/attacks/Clickjacking)
   
3. **HashiCorp Vault:**
   - [Vault Documentation](https://www.vaultproject.io/docs)
   
4. **AWS Secrets Manager:**
   - [Secrets Manager Documentation](https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html)
   
5. **RFC 7617: The 'Basic' HTTP Authentication Scheme:**
   - [RFC 7617](https://tools.ietf.org/html/rfc7617)
   
6. **Django-CSP:**
   - [Django CSP Documentation](https://django-csp.readthedocs.io/en/latest/)
   
7. **django-fernet-fields:**
   - [django-fernet-fields GitHub](https://github.com/fernet/django-fernet-fields)
   
8. **django-two-factor-auth:**
   - [django-two-factor-auth Documentation](https://django-two-factor-auth.readthedocs.io/en/stable/)
   
9. **Docker:**
   - [Docker Compose Documentation](https://docs.docker.com/compose/)
   
10. **Kubernetes:**
    - [Kubernetes Security](https://kubernetes.io/docs/concepts/security/overview/)

```

Contents of .env:
```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=DB2
DB_USER=postgres
DB_PASSWORD=
DB_HOST=localhost
DB_PORT=5432

```

Contents of manage.py:
```
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myproject.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()

```

Contents of app/models.py:
```
# app/models.py
from django.db import models
from django.core.exceptions import ValidationError

class AppUser(models.Model):
    ROLE_CHOICES = [
        ('admin', 'Admin'),
        ('user', 'User'),
        ('employee', 'Employee'),
    ]

    id = models.AutoField(primary_key=True, db_column='ID')
    full_name = models.CharField(max_length=255, db_column='Full Name')
    email = models.EmailField(max_length=254, unique=True, db_column='Email')
    age = models.PositiveIntegerField(db_column='Age')
    role = models.CharField(max_length=10, choices=ROLE_CHOICES, default='user', db_column='Role')

    class Meta:
        db_table = 'User'
        verbose_name = 'Пользователь'
        verbose_name_plural = 'Пользователи'

    def clean(self):
        if self.age <= 0:
            raise ValidationError({'age': 'Возраст должен быть положительным числом.'})

    def __str__(self):
        return self.full_name

class Employee(models.Model):
    user = models.OneToOneField(AppUser, on_delete=models.CASCADE, db_column='User ID')
    years_of_experience = models.PositiveIntegerField(db_column='Years of Experience')
    position = models.CharField(max_length=255, db_column='Position')
    salary = models.DecimalField(max_digits=10, decimal_places=2, db_column='Salary')
    photo = models.ImageField(null=True, blank=True, upload_to='employee_photos/', db_column='Photo')
    is_fired = models.BooleanField(default=False, db_column='Is Fired')  # новое поле

    class Meta:
        db_table = 'Employee'
        verbose_name = 'Сотрудник'
        verbose_name_plural = 'Сотрудники'

    def clean(self):
        errors = {}
        if self.years_of_experience < 0:
            errors['years_of_experience'] = 'Стаж работы не может быть отрицательным.'
        if self.salary < 0:
            errors['salary'] = 'Зарплата не может быть отрицательной.'
        if self.years_of_experience > self.user.age:
            errors['years_of_experience'] = 'Стаж работы не может превышать возраст.'
        if errors:
            raise ValidationError(errors)

    def __str__(self):
        return self.user.full_name

class Test(models.Model):
    id = models.AutoField(primary_key=True, db_column='ID')
    title = models.CharField(max_length=255, db_column='Title')
    passing_score = models.PositiveIntegerField(db_column='Passing Score')
    description = models.TextField(null=True, blank=True, db_column='Description')
    time_to_complete = models.PositiveIntegerField(db_column='Time to Complete')

    class Meta:
        db_table = 'Test'
        verbose_name = 'Тест'
        verbose_name_plural = 'Тесты'

    def clean(self):
        errors = {}
        if self.passing_score < 0:
            errors['passing_score'] = 'Проходной балл не может быть отрицательным.'
        if self.time_to_complete <= 0:
            errors['time_to_complete'] = 'Время на прохождение должно быть положительным числом.'
        if errors:
            raise ValidationError(errors)

class Question(models.Model):
    id = models.AutoField(primary_key=True, db_column='ID')
    test = models.ForeignKey('Test', on_delete=models.CASCADE, db_column='Test ID')
    question_text = models.TextField(db_column='Question Text')
    image = models.ImageField(null=True, blank=True, upload_to='question_images/', db_column='Image for the Question')  # ImageField вместо BinaryField

    class Meta:
        db_table = 'Question'
        verbose_name = 'Вопрос'
        verbose_name_plural = 'Вопросы'

class Answer(models.Model):
    id = models.AutoField(primary_key=True, db_column='ID')
    question = models.ForeignKey('Question', on_delete=models.CASCADE, db_column='Question ID')
    answer_text = models.TextField(db_column='Answer Text')
    is_correct = models.BooleanField(db_column='Correct Answer')
    image = models.ImageField(null=True, blank=True, upload_to='answer_images/', db_column='Image for the Answer')  # ImageField вместо BinaryField

    class Meta:
        db_table = 'Answer'
        verbose_name = 'Ответ'
        verbose_name_plural = 'Ответы'


class TestResult(models.Model):
    id = models.AutoField(primary_key=True, db_column='ID')
    user = models.ForeignKey('AppUser', on_delete=models.CASCADE, db_column='User ID')
    # Изменено: при удалении теста результаты не удаляются, test становится NULL
    test = models.ForeignKey('Test', on_delete=models.SET_NULL, null=True, blank=True, db_column='Test ID')
    employee = models.ForeignKey('Employee', null=True, blank=True, on_delete=models.CASCADE, db_column='Employee ID')
    test_date = models.DateField(db_column='Test Date')
    score_achieved = models.PositiveIntegerField(db_column='Score Achieved')
    status = models.CharField(max_length=20, db_column='Status')
    attempt_number = models.PositiveIntegerField(db_column='Attempt Number')
    approved = models.BooleanField(null=True, db_column='Approved')

    class Meta:
        db_table = 'TestResult'
        verbose_name = 'Результат Теста'
        verbose_name_plural = 'Результаты Тестов'

    def clean(self):
        errors = {}
        if self.status not in ['passed', 'failed', 'in_progress']:
            errors['status'] = 'Недопустимое значение статуса.'
        num_questions = Question.objects.filter(test=self.test).count() if self.test else 0
        if self.score_achieved > num_questions:
            errors['score_achieved'] = 'Набранный балл не может превышать количество вопросов в тесте.'
        if self.attempt_number <= 0:
            errors['attempt_number'] = 'Номер попытки должен быть положительным числом.'
        if errors:
            raise ValidationError(errors)


class TestDeletionRequest(models.Model):
    id = models.AutoField(primary_key=True, db_column='ID')
    test = models.ForeignKey('Test', on_delete=models.CASCADE, db_column='Test ID')
    requested_by = models.ForeignKey('AppUser', on_delete=models.CASCADE, db_column='Requested By')
    requested_at = models.DateTimeField(auto_now_add=True, db_column='Requested At')
    approved = models.BooleanField(null=True, db_column='Approved')

    class Meta:
        db_table = 'TestDeletionRequest'
        verbose_name = 'Запрос на удаление теста'
        verbose_name_plural = 'Запросы на удаление тестов'

    def __str__(self):
        return f"Запрос на удаление теста {self.test.title} от {self.requested_by.full_name}"

```

Contents of app/serializers.py:
```
# app/serializers.py
from rest_framework import serializers

class UserSerializer(serializers.Serializer):
    ID = serializers.IntegerField()
    Full_Name = serializers.CharField(max_length=255, source='full_name')
    Email = serializers.EmailField(source='email')
    Age = serializers.IntegerField(source='age')

class EmployeeSerializer(serializers.Serializer):
    ID = serializers.IntegerField()
    User_ID = serializers.IntegerField(source='user.id')
    Full_Name = serializers.CharField(source='user.full_name')
    Email = serializers.EmailField(source='user.email')
    Age = serializers.IntegerField(source='user.age')
    Years_of_Experience = serializers.IntegerField(source='years_of_experience')
    Position = serializers.CharField(max_length=255)
    Salary = serializers.DecimalField(max_digits=10, decimal_places=2)
    Photo = serializers.CharField(allow_null=True, required=False)

```

Contents of app/__init__.py:
```

```

Contents of app/apps.py:
```
from django.apps import AppConfig


class AppConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'app'

```

Contents of app/forms.py:
```
# app/forms.py
from django import forms
from .models import AppUser, Employee, TestDeletionRequest, Test, Question, Answer

class UserSelectionForm(forms.Form):
    user = forms.ModelChoiceField(
        queryset=AppUser.objects.all(),
        label='Выберите пользователя',
        widget=forms.Select(attrs={'class': 'form-control'})
    )

class AppUserForm(forms.ModelForm):
    class Meta:
        model = AppUser
        fields = ['full_name', 'email', 'age']
        widgets = {
            'full_name': forms.TextInput(attrs={'class': 'form-control'}),
            'email': forms.EmailInput(attrs={'class': 'form-control'}),
            'age': forms.NumberInput(attrs={'class': 'form-control'}),
        }

class AppUserAdminForm(forms.ModelForm):
    class Meta:
        model = AppUser
        fields = ['full_name', 'email', 'age', 'role']
        widgets = {
            'full_name': forms.TextInput(attrs={'class': 'form-control'}),
            'email': forms.EmailInput(attrs={'class': 'form-control'}),
            'age': forms.NumberInput(attrs={'class': 'form-control'}),
            'role': forms.Select(attrs={'class': 'form-control'}),
        }

class EmployeeForm(forms.ModelForm):
    # Добавляем поля, которые недоступны для редактирования сотрудником, но нужны для корректной валидации
    full_name = forms.CharField(
        max_length=255,
        label='Полное имя',
        widget=forms.TextInput(attrs={'class': 'form-control'})
    )
    email = forms.EmailField(
        label='Электронная почта',
        widget=forms.EmailInput(attrs={'class': 'form-control'})
    )
    age = forms.IntegerField(
        label='Возраст',
        widget=forms.NumberInput(attrs={'class': 'form-control'})
    )
    years_of_experience = forms.IntegerField(label='Стаж работы', required=False, disabled=True)
    position = forms.CharField(label='Должность', required=False, disabled=True)
    salary = forms.DecimalField(label='Зарплата', max_digits=10, decimal_places=2, required=False, disabled=True)

    class Meta:
        model = Employee
        fields = ['full_name', 'email', 'age', 'years_of_experience', 'position', 'salary', 'photo']
        widgets = {
            'photo': forms.ClearableFileInput(attrs={'class': 'form-control-file'}),
        }

    def __init__(self, *args, **kwargs):
        super(EmployeeForm, self).__init__(*args, **kwargs)
        if self.instance and self.instance.pk and self.instance.user_id:
            self.fields['full_name'].initial = self.instance.user.full_name
            self.fields['email'].initial = self.instance.user.email
            self.fields['age'].initial = self.instance.user.age
            self.fields['years_of_experience'].initial = self.instance.years_of_experience
            self.fields['position'].initial = self.instance.position
            self.fields['salary'].initial = self.instance.salary

    def save(self, commit=True):
        employee = super(EmployeeForm, self).save(commit=False)
        user = employee.user
        user.full_name = self.cleaned_data['full_name']
        user.email = self.cleaned_data['email']
        user.age = self.cleaned_data['age']
        if commit:
            user.save()
            employee.save()
        return employee


class EmployeeAdminForm(forms.ModelForm):
    full_name = forms.CharField(
        max_length=255,
        label='Полное имя',
        widget=forms.TextInput(attrs={'class': 'form-control'})
    )
    email = forms.EmailField(
        label='Электронная почта',
        widget=forms.EmailInput(attrs={'class': 'form-control'})
    )
    age = forms.IntegerField(
        label='Возраст',
        widget=forms.NumberInput(attrs={'class': 'form-control'})
    )
    role = forms.ChoiceField(
        label='Роль',
        choices=AppUser.ROLE_CHOICES,
        widget=forms.Select(attrs={'class': 'form-control'})
    )

    class Meta:
        model = Employee
        fields = [
            'full_name',
            'email',
            'age',
            'role',
            'years_of_experience',
            'position',
            'salary',
            'photo'
        ]
        widgets = {
            'years_of_experience': forms.NumberInput(attrs={'class': 'form-control'}),
            'position': forms.TextInput(attrs={'class': 'form-control'}),
            'salary': forms.NumberInput(attrs={'class': 'form-control', 'step': '0.01'}),
            'photo': forms.ClearableFileInput(attrs={'class': 'form-control-file'}),
        }

    def __init__(self, *args, **kwargs):
        super(EmployeeAdminForm, self).__init__(*args, **kwargs)
        # Проверяем, есть ли instance и user
        if self.instance and self.instance.pk and self.instance.user_id:
            self.fields['full_name'].initial = self.instance.user.full_name
            self.fields['email'].initial = self.instance.user.email
            self.fields['age'].initial = self.instance.user.age
            self.fields['role'].initial = self.instance.user.role

    def save(self, commit=True):
        employee = super(EmployeeAdminForm, self).save(commit=False)
        user = employee.user
        user.full_name = self.cleaned_data['full_name']
        user.email = self.cleaned_data['email']
        user.age = self.cleaned_data['age']
        user.role = self.cleaned_data['role']
        if commit:
            user.save()
            employee.save()
        return employee


class TestDeletionRequestForm(forms.ModelForm):
    class Meta:
        model = TestDeletionRequest
        fields = []


class AddTestForm(forms.ModelForm):
    class Meta:
        model = Test
        fields = ['title', 'passing_score', 'description', 'time_to_complete']
        widgets = {
            'title': forms.TextInput(attrs={'class': 'form-control'}),
            'passing_score': forms.NumberInput(attrs={'class': 'form-control'}),
            'description': forms.Textarea(attrs={'class': 'form-control'}),
            'time_to_complete': forms.NumberInput(attrs={'class': 'form-control'}),
        }

# Форма для вопросов
# app/forms.py
from django import forms
from .models import AppUser, Employee, TestDeletionRequest, Test, Question, Answer

class QuestionForm(forms.ModelForm):
    class Meta:
        model = Question
        # Убираем image
        fields = ['question_text']

class AnswerForm(forms.ModelForm):
    class Meta:
        model = Answer
        # Убираем image
        fields = ['answer_text', 'is_correct']


```

Contents of app/context_processors.py:
```
# app/context_processors.py
from .models import Employee
from .views import get_current_user

def add_role_and_user_id(request):
    app_user, role_name = get_current_user(request)
    context = {
        'role': role_name,
        'user_id': app_user.id if app_user else None,
    }
    if app_user.role in ['admin', 'employee']:
        try:
            employee = Employee.objects.get(user=app_user)
            context['employee_id'] = employee.id
        except Employee.DoesNotExist:
            context['employee_id'] = None
    else:
        context['employee_id'] = None
    return context

```

Contents of app/admin.py:
```
from django.contrib import admin

```

Contents of app/tests.py:
```
from django.test import TestCase

# Create your tests here.

```

Contents of app/urls.py:
```
# app/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path('', views.index, name='index'),
    path('set_user/', views.set_user, name='set_user'),
    path('users/', views.user_list, name='user_list'),
    path('users/<int:user_id>/', views.user_detail, name='user_detail'),
    path('users/delete/<int:user_id>/', views.delete_user, name='delete_user'),
    path('employees/', views.employee_list, name='employee_list'),
    path('employees/<int:employee_id>/', views.employee_detail, name='employee_detail'),
    path('employees/delete/<int:employee_id>/', views.delete_employee, name='delete_employee'),

    # Новые маршруты для увольнения и полного удаления сотрудника
    path('employees/fire/<int:employee_id>/', views.fire_employee, name='fire_employee'),
    path('employees/delete_from_db/<int:employee_id>/', views.delete_fired_employee, name='delete_fired_employee'),

    path('users/add/', views.add_user, name='add_user'),
    path('employees/add/', views.add_employee, name='add_employee'),

    path('tests/', views.test_list, name='test_list'),
    path('tests/start/<int:test_id>/', views.start_test, name='start_test'),
    path('tests/result/<int:result_id>/', views.test_result_detail, name='test_result_detail'),
    path('tests/results/', views.test_results, name='test_results'),
    path('tests/request_delete/<int:test_id>/', views.request_test_deletion, name='request_test_deletion'),

    # Новый маршрут для добавления теста сотрудником/админом
    path('tests/add/', views.add_test, name='add_test'),

    # Новый маршрут для просмотра результатов тестов админом
    path('admin1/test_results/', views.admin_test_results, name='admin_test_results'),

    path('admin1/test_deletion_requests/', views.test_deletion_requests, name='test_deletion_requests'),
    path('admin1/approve_test_deletion/<int:request_id>/', views.approve_test_deletion, name='approve_test_deletion'),

    path('employee/pending_test_results/', views.pending_test_results, name='pending_test_results'),
    path('employee/approve_test_result/<int:result_id>/', views.approve_test_result, name='approve_test_result'),

    # API
    path('api/users/', views.UserListAPI.as_view(), name='api_user_list'),
    path('api/users/<int:user_id>/', views.UserDetailAPI.as_view(), name='api_user_detail'),
    path('api/employees/', views.EmployeeListAPI.as_view(), name='api_employee_list'),
    path('api/employees/<int:employee_id>/', views.EmployeeDetailAPI.as_view(), name='api_employee_detail'),
    # Редактирование тестов (только для employee/admin)
    path('tests/edit/<int:test_id>/', views.edit_test, name='edit_test'),
    path('tests/<int:test_id>/add_question/', views.add_question, name='add_question'),
    path('question/edit/<int:question_id>/', views.edit_question, name='edit_question'),
    path('question/<int:question_id>/add_answer/', views.add_answer, name='add_answer'),
    path('answer/edit/<int:answer_id>/', views.edit_answer, name='edit_answer'),
]

```

Contents of app/filters.py:
```
# filters.py

import django_filters

```

Contents of app/views.py:
```
# app/views.py

from django.shortcuts import render, redirect, get_object_or_404
from django.contrib import messages
from django.http import HttpResponse
from django.core.exceptions import ValidationError
from django.db.models import Q
from django.core.paginator import Paginator
from django.utils import timezone

from .models import AppUser, Employee, Question, Test, Answer, TestResult, TestDeletionRequest
from .forms import AppUserForm, EmployeeForm, UserSelectionForm, EmployeeAdminForm, AppUserAdminForm, \
    TestDeletionRequestForm, AddTestForm, AnswerForm, QuestionForm

# DRF импорты
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from .serializers import UserSerializer, EmployeeSerializer

def get_current_user(request):
    user_id = request.session.get('user_id')
    if not user_id:
        return None, None
    try:
        app_user = AppUser.objects.get(id=user_id)
        role_name = app_user.role
        return app_user, role_name
    except AppUser.DoesNotExist:
        return None, None

def login_required(view_func):
    def _wrapped_view(request, *args, **kwargs):
        app_user, role_name = get_current_user(request)
        if not app_user:
            return redirect('set_user')
        return view_func(request, *args, **kwargs)
    return _wrapped_view

def index(request):
    app_user, role_name = get_current_user(request)
    if not app_user:
        return redirect('set_user')
    return render(request, 'index.html', {'role': role_name, 'user_id': app_user.id, 'app_user': app_user})

def set_user(request):
    if request.method == 'POST':
        form = UserSelectionForm(request.POST)
        if form.is_valid():
            app_user = form.cleaned_data['user']
            request.session['user_id'] = app_user.id
            messages.success(request, f'Вы вошли как {app_user.full_name}')
            return redirect('index')
    else:
        form = UserSelectionForm()
    return render(request, 'set_user.html', {'form': form})

@login_required
def user_list(request):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    search_query = request.GET.get('search', '').strip()
    sort_by = request.GET.get('sort', 'id')
    order = request.GET.get('order', 'asc')

    user_list = AppUser.objects.filter(
        Q(full_name__icontains=search_query) | Q(email__icontains=search_query)
    )

    if order == 'desc':
        sort_by = '-' + sort_by
    user_list = user_list.order_by(sort_by)

    paginator = Paginator(user_list, 10)
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)

    return render(request, 'user_list.html', {
        'page_obj': page_obj,
        'role': role_name
    })

@login_required
def user_detail(request, user_id):
    app_user, role_name = get_current_user(request)

    target_user = get_object_or_404(AppUser, id=user_id)

    if role_name != 'admin' and app_user.id != target_user.id:
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    if request.method == 'POST':
        if role_name == 'admin':
            form = AppUserAdminForm(request.POST, instance=target_user)
        else:
            form = AppUserForm(request.POST, instance=target_user)
        if form.is_valid():
            form.save()
            messages.success(request, 'Данные пользователя обновлены')
            return redirect('user_detail', user_id=user_id)
    else:
        if role_name == 'admin':
            form = AppUserAdminForm(instance=target_user)
        else:
            form = AppUserForm(instance=target_user)

    return render(request, 'user_detail.html', {
        'form': form,
        'app_user': target_user,
        'role': role_name
    })

@login_required
def employee_list(request):
    app_user, role_name = get_current_user(request)
    if role_name not in ['admin', 'employee']:
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    search_query = request.GET.get('search', '').strip()
    sort_by = request.GET.get('sort', 'id')
    order = request.GET.get('order', 'asc')

    ALLOWED_SORT_FIELDS = ['id', 'user__full_name', 'user__email', 'position', 'salary']

    if sort_by not in ALLOWED_SORT_FIELDS:
        sort_by = 'id'

    if order == 'desc':
        sort_by = '-' + sort_by

    if role_name == 'admin':
        employee_list = Employee.objects.filter(
            Q(user__full_name__icontains=search_query) | Q(user__email__icontains=search_query)
        ).select_related('user').order_by(sort_by)
    elif role_name == 'employee':
        employee_list = Employee.objects.filter(user=app_user).select_related('user').order_by(sort_by)
    else:
        employee_list = Employee.objects.none()

    paginator = Paginator(employee_list, 10)
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)

    return render(request, 'employee_list.html', {
        'page_obj': page_obj,
        'role': role_name
    })

@login_required
def employee_detail(request, employee_id):
    app_user, role_name = get_current_user(request)

    employee = get_object_or_404(Employee, id=employee_id)

    if role_name == 'employee':
        if employee.user.id != app_user.id:
            return HttpResponse('У вас нет доступа к этой странице', status=403)
        if request.method == 'POST':
            form = EmployeeForm(request.POST, request.FILES, instance=employee)
            if form.is_valid():
                form.save()
                messages.success(request, 'Данные сотрудника обновлены')
                return redirect('employee_detail', employee_id=employee_id)
        else:
            form = EmployeeForm(instance=employee)
    elif role_name == 'admin':
        if request.method == 'POST':
            form = EmployeeAdminForm(request.POST, request.FILES, instance=employee)
            if form.is_valid():
                form.save()
                messages.success(request, 'Данные сотрудника обновлены')
                return redirect('employee_detail', employee_id=employee_id)
        else:
            form = EmployeeAdminForm(instance=employee)
    else:
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    return render(request, 'employee_detail.html', {
        'form': form,
        'employee': employee,
        'role': role_name
    })

@login_required
def add_user(request):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    if request.method == 'POST':
        form = AppUserForm(request.POST)
        if form.is_valid():
            new_user = form.save(commit=False)
            new_user.role = 'user'
            new_user.save()
            messages.success(request, 'Новый пользователь добавлен')
            return redirect('user_list')
    else:
        form = AppUserForm()

    return render(request, 'add_user.html', {'form': form, 'role': role_name})

@login_required
def add_employee(request):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    if request.method == 'POST':
        form = EmployeeAdminForm(request.POST, request.FILES)
        if form.is_valid():
            # Создаём AppUser сначала
            new_user = AppUser(
                full_name=form.cleaned_data['full_name'],
                email=form.cleaned_data['email'],
                age=form.cleaned_data['age'],
                role=form.cleaned_data['role']
            )
            new_user.save()
            new_employee = Employee(
                user=new_user,
                years_of_experience=form.cleaned_data['years_of_experience'],
                position=form.cleaned_data['position'],
                salary=form.cleaned_data['salary'],
                photo=form.cleaned_data['photo']
            )
            new_employee.save()
            messages.success(request, 'Новый сотрудник добавлен')
            return redirect('employee_list')
    else:
        form = EmployeeAdminForm()

    return render(request, 'add_employee.html', {'form': form, 'role': role_name})

@login_required
def delete_user(request, user_id):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    target_user = get_object_or_404(AppUser, id=user_id)
    target_user.delete()
    messages.success(request, 'Пользователь удалён')
    return redirect('user_list')

@login_required
def delete_employee(request, employee_id):
    # Удаление сотрудника сейчас не обязательно изменять, но оставим как есть
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    employee = get_object_or_404(Employee, id=employee_id)
    employee.delete()
    messages.success(request, 'Сотрудник удалён')
    return redirect('employee_list')


@login_required
def fire_employee(request, employee_id):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа', status=403)

    employee = get_object_or_404(Employee, id=employee_id)
    if not employee.is_fired:
        employee.is_fired = True
        employee.save()
        messages.success(request, 'Сотрудник уволен. Теперь его можно полностью удалить из БД.')
    else:
        messages.warning(request, 'Сотрудник уже уволен.')
    return redirect('employee_list')

@login_required
def delete_fired_employee(request, employee_id):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа', status=403)

    employee = get_object_or_404(Employee, id=employee_id)
    if employee.is_fired:
        # Сначала удаляем связанного пользователя
        user = employee.user
        employee.delete()
        user.delete()
        messages.success(request, 'Сотрудник и его пользовательские данные полностью удалены из БД.')
    else:
        messages.warning(request, 'Невозможно удалить: сотрудник не помечен как уволенный.')
    return redirect('employee_list')


@login_required
def test_list(request):
    app_user, role_name = get_current_user(request)

    search_query = request.GET.get('search', '').strip()
    sort_by = request.GET.get('sort', 'title')
    order = request.GET.get('order', 'asc')

    test_list = Test.objects.filter(
        Q(title__icontains=search_query) | Q(description__icontains=search_query)
    )

    if order == 'desc':
        sort_by = '-' + sort_by
    test_list = test_list.order_by(sort_by)

    paginator = Paginator(test_list, 10)
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)

    return render(request, 'test_list.html', {
        'page_obj': page_obj,
        'role': role_name
    })

@login_required
def start_test(request, test_id):
    app_user, role_name = get_current_user(request)

    test = get_object_or_404(Test, id=test_id)
    questions = Question.objects.filter(test=test).prefetch_related('answer_set')

    if request.method == 'POST':
        selected_answers = request.POST.getlist('answers')
        correct_answers = Answer.objects.filter(question__test=test, is_correct=True).values_list('id', flat=True)
        score = sum(1 for ans_id in selected_answers if int(ans_id) in correct_answers)
        status = 'passed' if score >= test.passing_score else 'failed'
        employee = Employee.objects.filter(user=app_user).first()
        attempt_number = TestResult.objects.filter(user=app_user, test=test).count() + 1
        test_result = TestResult.objects.create(
            user=app_user,
            test=test,
            employee=employee,
            test_date=timezone.now(),
            score_achieved=score,
            status=status,
            attempt_number=attempt_number,
            approved=False,
        )

        messages.success(request, 'Ваш результат отправлен на проверку.')
        return redirect('test_result_detail', result_id=test_result.id)
    else:
        return render(request, 'start_test.html', {
            'test': test,
            'questions': questions,
        })

@login_required
def test_result_detail(request, result_id):
    app_user, role_name = get_current_user(request)
    test_result = get_object_or_404(TestResult, id=result_id, user=app_user)
    return render(request, 'test_result_detail.html', {
        'test_result': test_result,
    })


@login_required
def test_results(request):
    app_user, role_name = get_current_user(request)

    search_query = request.GET.get('search', '').strip()
    sort_by = request.GET.get('sort', 'test_date')
    order = request.GET.get('order', 'desc')

    test_results = TestResult.objects.filter(user=app_user, approved=True).select_related('test').filter(
        Q(test__title__icontains=search_query)
    )

    if order == 'desc':
        sort_by = '-' + sort_by
    test_results = test_results.order_by(sort_by)

    paginator = Paginator(test_results, 10)
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)

    return render(request, 'test_results.html', {
        'page_obj': page_obj,
        'role': role_name
    })

@login_required
def request_test_deletion(request, test_id):
    app_user, role_name = get_current_user(request)
    test = get_object_or_404(Test, id=test_id)

    if request.method == 'POST':
        TestDeletionRequest.objects.create(
            test=test,
            requested_by=app_user
        )
        messages.success(request, 'Запрос на удаление теста отправлен администратору.')
        return redirect('test_list')
    else:
        form = TestDeletionRequestForm()

    return render(request, 'request_test_deletion.html', {
        'form': form,
        'test': test,
        'role': role_name
    })

@login_required
def test_deletion_requests(request):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    deletion_requests = TestDeletionRequest.objects.filter(approved__isnull=True).select_related('test', 'requested_by')

    return render(request, 'test_deletion_requests.html', {
        'deletion_requests': deletion_requests,
        'role': role_name
    })

@login_required
def approve_test_deletion(request, request_id):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    deletion_request = get_object_or_404(TestDeletionRequest, id=request_id)
    test = deletion_request.test

    if request.method == 'POST':
        if 'approve' in request.POST:
            test.delete()
            deletion_request.approved = True
            messages.success(request, f'Тест "{test.title}" был удалён.')
        elif 'decline' in request.POST:
            deletion_request.approved = False
            messages.info(request, f'Удаление теста "{test.title}" отклонено.')
        deletion_request.save()
        return redirect('test_deletion_requests')

    return render(request, 'approve_test_deletion.html', {
        'deletion_request': deletion_request,
        'test': test,
        'role': role_name
    })

@login_required
def pending_test_results(request):
    app_user, role_name = get_current_user(request)
    if role_name != 'employee':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    test_results = TestResult.objects.filter(approved=False).select_related('test', 'user')

    return render(request, 'pending_test_results.html', {
        'test_results': test_results,
        'role': role_name
    })

@login_required
def approve_test_result(request, result_id):
    app_user, role_name = get_current_user(request)
    if role_name != 'employee':
        return HttpResponse('У вас нет доступа к этой странице', status=403)

    test_result = get_object_or_404(TestResult, id=result_id)

    if request.method == 'POST':
        if 'approve' in request.POST:
            test_result.approved = True
            test_result.save()
            messages.success(request, 'Результат теста одобрен.')
        elif 'decline' in request.POST:
            test_result.delete()
            messages.info(request, 'Результат теста отклонён и удалён.')
        return redirect('pending_test_results')

    return render(request, 'approve_test_result.html', {
        'test_result': test_result,
        'role': role_name
    })

# Новый view для добавления теста
@login_required
def add_test(request):
    app_user, role_name = get_current_user(request)
    if role_name not in ['employee', 'admin']:
        return HttpResponse('У вас нет доступа', status=403)

    if request.method == 'POST':
        form = AddTestForm(request.POST)
        if form.is_valid():
            form.save()
            messages.success(request, 'Тест успешно добавлен')
            return redirect('test_list')
    else:
        form = AddTestForm()

    return render(request, 'add_test.html', {'form': form, 'role': role_name})

# Новый view для просмотра результатов всех пользователей админом
@login_required
def admin_test_results(request):
    app_user, role_name = get_current_user(request)
    if role_name != 'admin':
        return HttpResponse('У вас нет доступа', status=403)

    search_query = request.GET.get('search', '').strip()
    sort_by = request.GET.get('sort', 'test_date')
    order = request.GET.get('order', 'desc')

    test_results = TestResult.objects.select_related('test', 'user').filter(
        Q(test__title__icontains=search_query) |
        Q(user__full_name__icontains=search_query)
    )

    if order == 'desc':
        sort_by = '-' + sort_by

    test_results = test_results.order_by(sort_by)

    paginator = Paginator(test_results, 10)
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)

    return render(request, 'admin_test_results.html', {
        'page_obj': page_obj,
        'role': role_name
    })
# app/views.py (дополнительно к существующему коду)

@login_required
def edit_test(request, test_id):
    app_user, role_name = get_current_user(request)
    if role_name not in ['employee', 'admin']:
        return HttpResponse('Нет доступа', status=403)
    test = get_object_or_404(Test, id=test_id)
    if request.method == 'POST':
        form = AddTestForm(request.POST, instance=test)
        if form.is_valid():
            form.save()
            messages.success(request, 'Тест обновлен')
            return redirect('edit_test', test_id=test_id)
    else:
        form = AddTestForm(instance=test)
    questions = Question.objects.filter(test=test)
    return render(request, 'edit_test.html', {'form': form, 'test': test, 'questions': questions})

@login_required
def add_question(request, test_id):
    app_user, role_name = get_current_user(request)
    if role_name not in ['employee', 'admin']:
        return HttpResponse('Нет доступа', status=403)
    test = get_object_or_404(Test, id=test_id)
    if request.method == 'POST':
        form = QuestionForm(request.POST, request.FILES)
        if form.is_valid():
            question = form.save(commit=False)
            question.test = test
            question.save()
            messages.success(request, 'Вопрос добавлен')
            return redirect('edit_test', test_id=test_id)
    else:
        form = QuestionForm()
    return render(request, 'add_question.html', {'form': form, 'test': test})

@login_required
def edit_question(request, question_id):
    app_user, role_name = get_current_user(request)
    if role_name not in ['employee', 'admin']:
        return HttpResponse('Нет доступа', status=403)
    question = get_object_or_404(Question, id=question_id)
    if request.method == 'POST':
        form = QuestionForm(request.POST, request.FILES, instance=question)
        if form.is_valid():
            form.save()
            messages.success(request, 'Вопрос обновлен')
            return redirect('edit_test', test_id=question.test.id)
    else:
        form = QuestionForm(instance=question)
    answers = Answer.objects.filter(question=question)
    return render(request, 'edit_question.html', {'form': form, 'question': question, 'answers': answers})

@login_required
def add_answer(request, question_id):
    app_user, role_name = get_current_user(request)
    if role_name not in ['employee', 'admin']:
        return HttpResponse('Нет доступа', status=403)
    question = get_object_or_404(Question, id=question_id)
    if request.method == 'POST':
        form = AnswerForm(request.POST, request.FILES)
        if form.is_valid():
            answer = form.save(commit=False)
            answer.question = question
            answer.save()
            messages.success(request, 'Ответ добавлен')
            return redirect('edit_question', question_id=question_id)
    else:
        form = AnswerForm()
    return render(request, 'add_answer.html', {'form': form, 'question': question})

@login_required
def edit_answer(request, answer_id):
    app_user, role_name = get_current_user(request)
    if role_name not in ['employee', 'admin']:
        return HttpResponse('Нет доступа', status=403)
    answer = get_object_or_404(Answer, id=answer_id)
    if request.method == 'POST':
        form = AnswerForm(request.POST, request.FILES, instance=answer)
        if form.is_valid():
            form.save()
            messages.success(request, 'Ответ обновлен')
            return redirect('edit_question', question_id=answer.question.id)
    else:
        form = AnswerForm(instance=answer)
    return render(request, 'edit_answer.html', {'form': form, 'answer': answer})

# API Views
class UserListAPI(APIView):
    def get(self, request):
        app_users = AppUser.objects.all()
        serializer = UserSerializer(app_users, many=True)
        return Response(serializer.data)

class UserDetailAPI(APIView):
    def get(self, request, user_id):
        try:
            app_user = AppUser.objects.get(id=user_id)
            serializer = UserSerializer(app_user)
            return Response(serializer.data)
        except AppUser.DoesNotExist:
            return Response({'error': 'Пользователь не найден'}, status=status.HTTP_404_NOT_FOUND)

class EmployeeListAPI(APIView):
    def get(self, request):
        employees = Employee.objects.all()
        serializer = EmployeeSerializer(employees, many=True)
        return Response(serializer.data)

class EmployeeDetailAPI(APIView):
    def get(self, request, employee_id):
        try:
            employee = Employee.objects.get(id=employee_id)
            serializer = EmployeeSerializer(employee)
            return Response(serializer.data)
        except Employee.DoesNotExist:
            return Response({'error': 'Сотрудник не найден'}, status=status.HTTP_404_NOT_FOUND)

```

Contents of app/templatetags/__init__.py:
```

```

Contents of app/templatetags/app_extras.py:
```
# app/templatetags/app_extras.py
from django import template
import base64

register = template.Library()

@register.filter
def b64encode(value):
    return base64.b64encode(value).decode('utf-8')

@register.filter
def to(value, arg):
    return range(value, arg+1)

@register.filter
def get_item(dictionary, key):
    return dictionary.get(key)

```

Contents of app/migrations/0008_employee_is_fired_alter_testresult_test.py:
```
# Generated by Django 4.2.16 on 2024-12-11 02:45

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0007_testresult_approved_testdeletionrequest'),
    ]

    operations = [
        migrations.AddField(
            model_name='employee',
            name='is_fired',
            field=models.BooleanField(db_column='Is Fired', default=False),
        ),
        migrations.AlterField(
            model_name='testresult',
            name='test',
            field=models.ForeignKey(blank=True, db_column='Test ID', null=True, on_delete=django.db.models.deletion.SET_NULL, to='app.test'),
        ),
    ]

```

Contents of app/migrations/0006_alter_testresult_employee.py:
```
# Generated by Django 4.2.16 on 2024-11-29 05:23

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0005_remove_employee_age_remove_employee_full_name_and_more'),
    ]

    operations = [
        migrations.AlterField(
            model_name='testresult',
            name='employee',
            field=models.ForeignKey(blank=True, db_column='Employee ID', null=True, on_delete=django.db.models.deletion.CASCADE, to='app.employee'),
        ),
    ]

```

Contents of app/migrations/__init__.py:
```

```

Contents of app/migrations/0004_remove_appuser_is_active_remove_employee_is_active_and_more.py:
```
# Generated by Django 4.2.16 on 2024-11-29 04:28

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0003_auto_20241127_0421'),
    ]

    operations = [
        migrations.RemoveField(
            model_name='appuser',
            name='is_active',
        ),
        migrations.RemoveField(
            model_name='employee',
            name='is_active',
        ),
        migrations.AlterField(
            model_name='appuser',
            name='role',
            field=models.CharField(choices=[('admin', 'Admin'), ('user', 'User'), ('employee', 'Employee')], db_column='Role', default='user', max_length=10),
        ),
        migrations.DeleteModel(
            name='Role',
        ),
    ]

```

Contents of app/migrations/0009_alter_answer_image_alter_question_image.py:
```
# Generated by Django 4.2.16 on 2024-12-11 03:14

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0008_employee_is_fired_alter_testresult_test'),
    ]

    operations = [
        migrations.AlterField(
            model_name='answer',
            name='image',
            field=models.ImageField(blank=True, db_column='Image for the Answer', null=True, upload_to='answer_images/'),
        ),
        migrations.AlterField(
            model_name='question',
            name='image',
            field=models.ImageField(blank=True, db_column='Image for the Question', null=True, upload_to='question_images/'),
        ),
    ]

```

Contents of app/migrations/0007_testresult_approved_testdeletionrequest.py:
```
# Generated by Django 4.2.16 on 2024-11-29 05:37

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0006_alter_testresult_employee'),
    ]

    operations = [
        migrations.AddField(
            model_name='testresult',
            name='approved',
            field=models.BooleanField(db_column='Approved', null=True),
        ),
        migrations.CreateModel(
            name='TestDeletionRequest',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('requested_at', models.DateTimeField(auto_now_add=True, db_column='Requested At')),
                ('approved', models.BooleanField(db_column='Approved', null=True)),
                ('requested_by', models.ForeignKey(db_column='Requested By', on_delete=django.db.models.deletion.CASCADE, to='app.appuser')),
                ('test', models.ForeignKey(db_column='Test ID', on_delete=django.db.models.deletion.CASCADE, to='app.test')),
            ],
            options={
                'verbose_name': 'Запрос на удаление теста',
                'verbose_name_plural': 'Запросы на удаление тестов',
                'db_table': 'TestDeletionRequest',
            },
        ),
    ]

```

Contents of app/migrations/0002_appuser_is_active_employee_is_active.py:
```
# Generated by Django 4.2.16 on 2024-11-27 04:06

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0001_initial'),
    ]

    operations = [
        migrations.AddField(
            model_name='appuser',
            name='is_active',
            field=models.BooleanField(db_column='Is Active', default=True),
        ),
        migrations.AddField(
            model_name='employee',
            name='is_active',
            field=models.BooleanField(db_column='Is Active', default=True),
        ),
    ]

```

Contents of app/migrations/0003_auto_20241127_0421.py:
```
# app/migrations/0003_auto_add_roles.py
from django.db import migrations

def add_roles(apps, schema_editor):
    Role = apps.get_model('app', 'Role')
    Role.objects.create(name='admin')
    Role.objects.create(name='user')
    Role.objects.create(name='employee')

class Migration(migrations.Migration):

    dependencies = [
        ('app', '0002_appuser_is_active_employee_is_active'),
    ]

    operations = [
        migrations.RunPython(add_roles),
    ]

```

Contents of app/migrations/0001_initial.py:
```
# Generated by Django 4.2.16 on 2024-11-27 03:49

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AppUser',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('full_name', models.CharField(db_column='Full Name', max_length=255)),
                ('email', models.EmailField(db_column='Email', max_length=254, unique=True)),
                ('age', models.PositiveIntegerField(db_column='Age')),
            ],
            options={
                'verbose_name': 'Пользователь',
                'verbose_name_plural': 'Пользователи',
                'db_table': 'User',
            },
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('full_name', models.CharField(db_column='Full Name', max_length=255)),
                ('years_of_experience', models.PositiveIntegerField(db_column='Years of Experience')),
                ('position', models.CharField(db_column='Position', max_length=255)),
                ('salary', models.DecimalField(db_column='Salary', decimal_places=2, max_digits=10)),
                ('age', models.PositiveIntegerField(db_column='Age')),
                ('photo', models.ImageField(blank=True, db_column='Photo', null=True, upload_to='employee_photos/')),
            ],
            options={
                'verbose_name': 'Сотрудник',
                'verbose_name_plural': 'Сотрудники',
                'db_table': 'Employee',
            },
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('name', models.CharField(db_column='Name', max_length=20, unique=True)),
            ],
            options={
                'verbose_name': 'Роль',
                'verbose_name_plural': 'Роли',
                'db_table': 'Role',
            },
        ),
        migrations.CreateModel(
            name='Test',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='Title', max_length=255)),
                ('passing_score', models.PositiveIntegerField(db_column='Passing Score')),
                ('description', models.TextField(blank=True, db_column='Description', null=True)),
                ('time_to_complete', models.PositiveIntegerField(db_column='Time to Complete')),
            ],
            options={
                'verbose_name': 'Тест',
                'verbose_name_plural': 'Тесты',
                'db_table': 'Test',
            },
        ),
        migrations.CreateModel(
            name='TestResult',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('test_date', models.DateField(db_column='Test Date')),
                ('score_achieved', models.PositiveIntegerField(db_column='Score Achieved')),
                ('status', models.CharField(db_column='Status', max_length=20)),
                ('attempt_number', models.PositiveIntegerField(db_column='Attempt Number')),
                ('employee', models.ForeignKey(db_column='Employee ID', on_delete=django.db.models.deletion.CASCADE, to='app.employee')),
                ('test', models.ForeignKey(db_column='Test ID', on_delete=django.db.models.deletion.CASCADE, to='app.test')),
                ('user', models.ForeignKey(db_column='User ID', on_delete=django.db.models.deletion.CASCADE, to='app.appuser')),
            ],
            options={
                'verbose_name': 'Результат Теста',
                'verbose_name_plural': 'Результаты Тестов',
                'db_table': 'TestResult',
            },
        ),
        migrations.CreateModel(
            name='Question',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('question_text', models.TextField(db_column='Question Text')),
                ('image', models.BinaryField(blank=True, db_column='Image for the Question', null=True)),
                ('test', models.ForeignKey(db_column='Test ID', on_delete=django.db.models.deletion.CASCADE, to='app.test')),
            ],
            options={
                'verbose_name': 'Вопрос',
                'verbose_name_plural': 'Вопросы',
                'db_table': 'Question',
            },
        ),
        migrations.AddField(
            model_name='appuser',
            name='role',
            field=models.ForeignKey(db_column='Role_ID', on_delete=django.db.models.deletion.CASCADE, to='app.role'),
        ),
        migrations.CreateModel(
            name='Answer',
            fields=[
                ('id', models.AutoField(db_column='ID', primary_key=True, serialize=False)),
                ('answer_text', models.TextField(db_column='Answer Text')),
                ('is_correct', models.BooleanField(db_column='Correct Answer')),
                ('image', models.BinaryField(blank=True, db_column='Image for the Answer', null=True)),
                ('question', models.ForeignKey(db_column='Question ID', on_delete=django.db.models.deletion.CASCADE, to='app.question')),
            ],
            options={
                'verbose_name': 'Ответ',
                'verbose_name_plural': 'Ответы',
                'db_table': 'Answer',
            },
        ),
    ]

```

Contents of app/migrations/0005_remove_employee_age_remove_employee_full_name_and_more.py:
```
# Generated by Django 4.2.16 on 2024-11-29 04:43

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('app', '0004_remove_appuser_is_active_remove_employee_is_active_and_more'),
    ]

    operations = [
        migrations.RemoveField(
            model_name='employee',
            name='age',
        ),
        migrations.RemoveField(
            model_name='employee',
            name='full_name',
        ),
        migrations.AddField(
            model_name='employee',
            name='user',
            field=models.OneToOneField(db_column='User ID', default=1, on_delete=django.db.models.deletion.CASCADE, to='app.appuser'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='employee',
            name='id',
            field=models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID'),
        ),
    ]

```

Contents of app/templates/test_result_detail.html:
```
<!-- app/templates/test_result_detail.html -->
{% extends 'base.html' %}

{% block title %}Результат теста{% endblock %}

{% block content %}
<h1>Результат теста: {{ test_result.test.title }}</h1>
<p>Дата прохождения: {{ test_result.test_date }}</p>
<p>Результат: {{ test_result.score_achieved }} из {{ test_result.test.question_set.count }} вопросов</p>
<p>Статус: {{ test_result.status }}</p>
<p>Попытка номер: {{ test_result.attempt_number }}</p>

<a href="{% url 'test_list' %}" class="btn btn-secondary">Назад к списку тестов</a>
<a href="{% url 'test_results' %}" class="btn btn-primary">Мои результаты</a>
{% endblock %}

```

Contents of app/templates/test_results.html:
```
<!-- app/templates/test_results.html -->
{% extends 'base.html' %}

{% block title %}Мои результаты тестов{% endblock %}

{% block content %}
<h1>Мои результаты тестов</h1>

<!-- Форма фильтрации -->
<form method="get" class="form-inline mb-3">
    <div class="form-group mr-2">
        <input type="text" name="search" class="form-control" placeholder="Поиск по названию теста" value="{{ request.GET.search }}">
    </div>
    <button type="submit" class="btn btn-outline-primary">Поиск</button>
</form>

<table class="table table-hover" id="test-results-table">
    <thead class="thead-light">
        <tr>
            <th>Тест</th>
            <th>Дата прохождения</th>
            <th>Результат</th>
            <th>Статус</th>
            <th>Попытка</th>
        </tr>
    </thead>
    <tbody>
        {% for result in page_obj.object_list %}
        <tr>
            <td>{{ result.test.title }}</td>
            <td>{{ result.test_date }}</td>
            <td>{{ result.score_achieved }} / {{ result.test.passing_score }}</td>
            <td>{{ result.status }}</td>
            <td>{{ result.attempt_number }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">У вас нет результатов</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Пагинация -->
<nav aria-label="Навигация по страницам">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Предыдущая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Предыдущая</span>
            </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li class="page-item active">
                    <span class="page-link">{{ num }}</span>
                </li>
            {% else %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ num }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">{{ num }}</a>
                </li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Следующая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Следующая</span>
            </li>
        {% endif %}
    </ul>
</nav>

{% endblock %}

```

Contents of app/templates/add_employee.html:
```
<!-- app/templates/add_employee.html -->
{% extends 'base.html' %}

{% block title %}Добавить сотрудника{% endblock %}

{% block content %}
<div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body">
        <h1 class="card-title">Добавить сотрудника</h1>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Добавить сотрудника</button>
            <!-- Условное отображение кнопки "Назад к списку сотрудников" только для администраторов -->
            {% if role == 'admin' %}
                <a href="{% url 'employee_list' %}" class="btn btn-secondary">Назад к списку сотрудников</a>
            {% endif %}
        </form>
    </div>
</div>
{% endblock %}

```

Contents of app/templates/admin_test_results.html:
```
<!-- app/templates/admin_test_results.html -->
{% extends 'base.html' %}

{% block title %}Все результаты тестов{% endblock %}

{% block content %}
<h1>Все результаты тестов</h1>

<form method="get" class="form-inline mb-3">
    <div class="form-group mr-2">
        <input type="text" name="search" class="form-control" placeholder="Поиск по тесту или ФИО пользователя" value="{{ request.GET.search }}">
    </div>
    <button type="submit" class="btn btn-outline-primary">Поиск</button>
</form>

<table class="table table-hover">
    <thead class="thead-light">
        <tr>
            <th>Пользователь</th>
            <th>Тест</th>
            <th>Дата прохождения</th>
            <th>Результат</th>
            <th>Статус</th>
            <th>Попытка</th>
        </tr>
    </thead>
    <tbody>
        {% for result in page_obj.object_list %}
        <tr>
            <td>{{ result.user.full_name }}</td>
            <td>
            {% if result.test %}
                {{ result.test.title }}
            {% else %}
                Тест удален
            {% endif %}
            </td>
            <td>{{ result.test_date }}</td>
            <td>{{ result.score_achieved }}{% if result.test %} / {{ result.test.passing_score }}{% endif %}</td>
            <td>{{ result.status }}</td>
            <td>{{ result.attempt_number }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6">Нет результатов</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<nav aria-label="Навигация по страницам">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Предыдущая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Предыдущая</span>
            </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li class="page-item active">
                    <span class="page-link">{{ num }}</span>
                </li>
            {% else %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ num }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">{{ num }}</a>
                </li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Следующая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Следующая</span>
            </li>
        {% endif %}
    </ul>
</nav>
{% endblock %}

```

Contents of app/templates/navbar.html:
```
<!-- app/templates/navbar.html -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="{% url 'index' %}">Мое приложение</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"     aria-controls="navbarNav" aria-expanded="false" aria-label="Переключить навигацию">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item {% if request.resolver_match.url_name == 'index' %}active{% endif %}">
                <a class="nav-link" href="{% url 'index' %}">Главная</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'test_list' %}">Тесты</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'test_results' %}">Мои результаты</a>
            </li>
            {% if user_id %}
                <li class="nav-item">
                    {% if role == 'employee' or role == 'admin' %}
                        {% if employee_id %}
                            <a class="nav-link" href="{% url 'employee_detail' employee_id %}">Мой профиль</a>
                        {% else %}
                            <a class="nav-link disabled" href="#">Профиль недоступен</a>
                        {% endif %}
                    {% elif role == 'user' %}
                        <a class="nav-link" href="{% url 'user_detail' user_id %}">Мой профиль</a>
                    {% endif %}
                </li>
            {% endif %}
            {% if role == 'admin' %}
                <li class="nav-item {% if request.resolver_match.url_name == 'user_list' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'user_list' %}">Пользователи</a>
                </li>
                <li class="nav-item {% if request.resolver_match.url_name == 'employee_list' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'employee_list' %}">Сотрудники</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'admin_test_results' %}">Все результаты</a>
                </li>
            {% endif %}
            {% if role == 'employee' %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'pending_test_results' %}">Одобрение результатов</a>
                </li>
            {% endif %}
            {% if role == 'admin' %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'test_deletion_requests' %}">Одобрение удаления тестов</a>
                </li>
            {% endif %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'set_user' %}">Сменить пользователя</a>
            </li>
        </ul>
    </div>
</nav>

```

Contents of app/templates/employee_list.html:
```
{% extends 'base.html' %}

{% block title %}Список сотрудников{% endblock %}

{% block content %}
<h1>Список сотрудников</h1>
{% if role == 'admin' %}
    <a href="{% url 'add_employee' %}" class="btn btn-success mb-3">Добавить сотрудника</a>
{% endif %}

<!-- Форма фильтрации -->
<form method="get" class="form-inline mb-3">
    <div class="form-group mr-2">
        <input type="text" name="search" class="form-control" placeholder="Поиск по имени или email" value="{{ request.GET.search }}">
    </div>
    <button type="submit" class="btn btn-outline-primary">Поиск</button>
</form>

<table class="table table-hover" id="employee-table">
    <thead class="thead-light">
        <tr>
            <th>ID</th>
            <th>ФИО</th>
            <th>Email</th>
            <th>Должность</th>
            {% if role == 'admin' %}
                <th>Зарплата</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for employee in page_obj.object_list %}
        <tr data-employee-id="{{ employee.id }}" data-is-fired="{{ employee.is_fired|yesno:'true,false' }}">
            <td>{{ employee.id }}</td>
            <td>{{ employee.user.full_name }}</td>
            <td>{{ employee.user.email }}</td>
            <td>{{ employee.position }}</td>
            {% if role == 'admin' %}
                <td>{{ employee.salary }}</td>
            {% endif %}
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">Нет сотрудников</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Пагинация -->
<nav aria-label="Навигация по страницам">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Предыдущая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Предыдущая</span>
            </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li class="page-item active">
                    <span class="page-link">{{ num }}</span>
                </li>
            {% else %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ num }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">{{ num }}</a>
                </li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Следующая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Следующая</span>
            </li>
        {% endif %}
    </ul>
</nav>

<!-- Контекстное меню -->
<div id="context-menu" class="context-menu">
    <ul>
        <li data-action="view">Просмотреть</li>
        <li data-action="edit">Редактировать</li>
        {% if role == 'admin' %}
            <!-- Для неуволенного сотрудника -->
            <li data-action="fire" class="context-action-fire">Уволить</li>
            <!-- Для уволенного сотрудника -->
            <li data-action="delete_db" class="context-action-delete-db">Удалить из БД</li>
        {% endif %}
    </ul>
</div>

{% endblock %}

{% block extra_css %}
<style>
.context-menu {
    display: none;
    position: absolute;
    z-index: 1000;
    background: #fff;
    border: 1px solid #ccc;
}

.context-menu ul {
    list-style: none;
    padding: 5px 0;
    margin: 0;
}

.context-menu ul li {
    padding: 5px 20px;
    cursor: pointer;
}

.context-menu ul li:hover {
    background-color: #eee;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const table = document.getElementById('employee-table');
    const contextMenu = document.getElementById('context-menu');
    let selectedEmployeeId = null;
    let selectedEmployeeFired = false;

    const fireItem = contextMenu.querySelector('.context-action-fire');
    const deleteDbItem = contextMenu.querySelector('.context-action-delete-db');

    table.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        const targetRow = e.target.closest('tr[data-employee-id]');
        if (targetRow) {
            selectedEmployeeId = targetRow.getAttribute('data-employee-id');
            selectedEmployeeFired = targetRow.getAttribute('data-is-fired') === 'true';
            // Показываем/скрываем пункты меню в зависимости от статуса
            if (selectedEmployeeFired) {
                fireItem.style.display = 'none';
                deleteDbItem.style.display = 'block';
            } else {
                fireItem.style.display = 'block';
                deleteDbItem.style.display = 'none';
            }

            contextMenu.style.top = e.pageY + 'px';
            contextMenu.style.left = e.pageX + 'px';
            contextMenu.style.display = 'block';
        }
    });

    document.addEventListener('click', function(e) {
        if (!e.target.closest('#context-menu')) {
            contextMenu.style.display = 'none';
        }
    });

    contextMenu.addEventListener('click', function(e) {
        const action = e.target.getAttribute('data-action');
        if (action && selectedEmployeeId) {
            if (action === 'view' || action === 'edit') {
                window.location.href = '{% url "employee_detail" 0 %}'.replace('0', selectedEmployeeId);
            } else if (action === 'fire') {
                if (confirm('Вы уверены, что хотите уволить этого сотрудника?')) {
                    window.location.href = '{% url "fire_employee" 0 %}'.replace('0', selectedEmployeeId);
                }
            } else if (action === 'delete_db') {
                if (confirm('Вы уверены, что хотите полностью удалить уволенного сотрудника из БД?')) {
                    window.location.href = '{% url "delete_fired_employee" 0 %}'.replace('0', selectedEmployeeId);
                }
            }
            contextMenu.style.display = 'none';
        }
    });
});
</script>
{% endblock %}

```

Contents of app/templates/pending_test_results.html:
```
<!-- app/templates/pending_test_results.html -->
{% extends 'base.html' %}

{% block title %}Ожидающие результаты тестов{% endblock %}

{% block content %}
<h1>Ожидающие результаты тестов</h1>

<table class="table">
    <thead>
        <tr>
            <th>Пользователь</th>
            <th>Тест</th>
            <th>Дата</th>
            <th>Результат</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for result in test_results %}
        <tr>
            <td>{{ result.user.full_name }}</td>
            <td>{{ result.test.title }}</td>
            <td>{{ result.test_date }}</td>
            <td>{{ result.score_achieved }}</td>
            <td>
                <a href="{% url 'approve_test_result' result.id %}" class="btn btn-primary">Просмотреть</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">Нет результатов для одобрения.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

```

Contents of app/templates/add_answer.html:
```
{% extends 'base.html' %}
{% block title %}Добавить ответ{% endblock %}
{% block content %}
<h1>Добавить ответ к вопросу: {{ question.question_text }}</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Добавить</button>
    <a href="{% url 'edit_question' question.id %}" class="btn btn-secondary">Назад</a>
</form>
{% endblock %}

```

Contents of app/templates/index.html:
```
<!-- app/templates/index.html -->
{% extends 'base.html' %}

{% block title %}Главная{% endblock %}

{% block content %}
<div class="jumbotron">
    <h1 class="display-4">Добро пожаловать, {{ app_user.full_name }}</h1>
    <p class="lead">Вы вошли как {{ app_user.full_name }}.</p>
    <hr class="my-4">
    {% if role == 'admin' %}
        <p>Используйте меню навигации для управления пользователями и сотрудниками.</p>
    {% else %}
        <p>Вы можете просмотреть и изменить свой профиль.</p>
    {% endif %}
</div>
{% endblock %}

```

Contents of app/templates/base.html:
```
<!-- app/templates/base.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Мое приложение{% endblock %}</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Дополнительные стили -->
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Навигационная панель -->
    {% include 'navbar.html' %}

    <!-- Основное содержимое -->
    <div class="container mt-4">
        {% include 'messages.html' %}
        {% block content %}
        {% endblock %}
    </div>

    <!-- Футер -->
    <footer class="bg-light text-center text-lg-start mt-auto">
        <div class="container p-4">
            <p class="text-muted">&copy; 2024 Мое приложение</p>
        </div>
    </footer>

    <!-- Bootstrap JS и зависимости (jQuery и Popper.js) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" crossorigin="anonymous"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>

```

Contents of app/templates/test_deletion_requests.html:
```
<!-- app/templates/test_deletion_requests.html -->
{% extends 'base.html' %}

{% block title %}Запросы на удаление тестов{% endblock %}

{% block content %}
<h1>Запросы на удаление тестов</h1>

<table class="table">
    <thead>
        <tr>
            <th>Тест</th>
            <th>Запрошен пользователем</th>
            <th>Дата запроса</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for req in deletion_requests %}
        <tr>
            <td>{{ req.test.title }}</td>
            <td>{{ req.requested_by.full_name }}</td>
            <td>{{ req.requested_at }}</td>
            <td>
                <a href="{% url 'approve_test_deletion' req.id %}" class="btn btn-primary">Просмотреть</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">Нет запросов на удаление.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

```

Contents of app/templates/set_user.html:
```
<!-- app/templates/set_user.html -->
{% extends 'base.html' %}

{% block title %}Выбрать пользователя{% endblock %}

{% block content %}
<div class="card mx-auto" style="max-width: 500px;">
    <div class="card-body">
        <h2 class="card-title">Выберите пользователя</h2>
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                {{ form.user.label_tag }}
                {{ form.user }}
            </div>
            <button type="submit" class="btn btn-primary">Войти</button>
        </form>
    </div>
</div>
{% endblock %}

```

Contents of app/templates/approve_test_result.html:
```
<!-- app/templates/approve_test_result.html -->
{% extends 'base.html' %}

{% block title %}Одобрение результата теста{% endblock %}

{% block content %}
<h1>Одобрение результата теста</h1>

<p><strong>Пользователь:</strong> {{ test_result.user.full_name }}</p>
<p><strong>Тест:</strong> {{ test_result.test.title }}</p>
<p><strong>Дата:</strong> {{ test_result.test_date }}</p>
<p><strong>Результат:</strong> {{ test_result.score_achieved }}</p>

<form method="post">
    {% csrf_token %}
    <button type="submit" name="approve" class="btn btn-success">Одобрить</button>
    <button type="submit" name="decline" class="btn btn-danger">Отклонить и удалить</button>
    <a href="{% url 'pending_test_results' %}" class="btn btn-link">Назад к списку</a>
</form>
{% endblock %}

```

Contents of app/templates/add_test.html:
```
<!-- app/templates/add_test.html -->
{% extends 'base.html' %}

{% block title %}Добавить тест{% endblock %}

{% block content %}
<h1>Добавить тест</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Добавить</button>
    <a href="{% url 'test_list' %}" class="btn btn-secondary">Отмена</a>
</form>
{% endblock %}

```

Contents of app/templates/add_question.html:
```
{% extends 'base.html' %}
{% block title %}Добавить вопрос{% endblock %}
{% block content %}
<h1>Добавить вопрос к тесту: {{ test.title }}</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Добавить</button>
    <a href="{% url 'edit_test' test.id %}" class="btn btn-secondary">Назад</a>
</form>
{% endblock %}

```

Contents of app/templates/user_detail.html:
```
<!-- app/templates/user_detail.html -->
{% extends 'base.html' %}

{% block title %}Детали пользователя{% endblock %}

{% block content %}
<div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body">
        <h1 class="card-title">Детали пользователя</h1>

        <form method="post">
            {% csrf_token %}
            {% for field in form %}
                <div class="form-group">
                    {{ field.label_tag }}
                    {{ field }}
                    {% if field.errors %}
                        <div class="invalid-feedback">
                            {{ field.errors }}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
            <button type="submit" class="btn btn-primary">Сохранить</button>
            <!-- Условное отображение кнопки "Назад к списку пользователей" только для администраторов -->
            {% if role == 'admin' %}
                <a href="{% url 'user_list' %}" class="btn btn-secondary">Назад к списку пользователей</a>
            {% endif %}
        </form>
    </div>
</div>
{% endblock %}

```

Contents of app/templates/start_test.html:
```
<!-- app/templates/start_test.html -->
{% extends 'base.html' %}

{% block title %}Прохождение теста{% endblock %}

{% block content %}
<h1>{{ test.title }}</h1>
<p>{{ test.description }}</p>
<form method="post">
    {% csrf_token %}
    {% for question in questions %}
        <div class="card mb-3">
            <div class="card-header">
                Вопрос {{ forloop.counter }}: {{ question.question_text }}
            </div>
            <div class="card-body">
                {% for answer in question.answer_set.all %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="answers" value="{{ answer.id }}" id="answer{{ answer.id }}">
                        <label class="form-check-label" for="answer{{ answer.id }}">
                            {{ answer.answer_text }}
                        </label>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endfor %}
    <button type="submit" class="btn btn-primary">Завершить тест</button>
</form>
{% endblock %}

```

Contents of app/templates/edit_question.html:
```
{% extends 'base.html' %}
{% block title %}Редактирование вопроса{% endblock %}
{% block content %}
<h1>Редактирование вопроса теста: {{ question.test.title }}</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Сохранить</button>
    <a href="{% url 'edit_test' question.test.id %}" class="btn btn-secondary">Назад</a>
</form>

<h2>Ответы на вопрос</h2>
<a href="{% url 'add_answer' question.id %}" class="btn btn-success mb-3">Добавить ответ</a>
<table class="table table-hover">
    <thead>
        <tr>
            <th>Текст ответа</th>
            <th>Правильный?</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for ans in answers %}
        <tr>
            <td>{{ ans.answer_text }}</td>
            <td>{{ ans.is_correct|yesno:"Да,Нет" }}</td>
            <td>
                <a href="{% url 'edit_answer' ans.id %}" class="btn btn-sm btn-primary">Редактировать</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="3">Нет ответов</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

```

Contents of app/templates/edit_test.html:
```
<!-- app/templates/edit_test.html -->
{% extends 'base.html' %}
{% block title %}Редактирование теста{% endblock %}
{% block content %}
<h1>Редактирование теста: {{ test.title }}</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Сохранить</button>
</form>

<h2>Вопросы</h2>
<a href="{% url 'add_question' test.id %}" class="btn btn-success mb-3">Добавить вопрос</a>
<table class="table table-hover">
    <thead>
        <tr>
            <th>Текст вопроса</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for q in questions %}
        <tr>
            <td>{{ q.question_text }}</td>
            <td>
                <a href="{% url 'edit_question' q.id %}" class="btn btn-sm btn-primary">Редактировать</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="2">Нет вопросов</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

```

Contents of app/templates/approve_test_deletion.html:
```
<!-- app/templates/approve_test_deletion.html -->
{% extends 'base.html' %}

{% block title %}Одобрение удаления теста{% endblock %}

{% block content %}
<h1>Одобрение удаления теста</h1>

<p><strong>Тест:</strong> {{ test.title }}</p>
<p><strong>Запрошен пользователем:</strong> {{ deletion_request.requested_by.full_name }}</p>
<p><strong>Дата запроса:</strong> {{ deletion_request.requested_at }}</p>

<form method="post">
    {% csrf_token %}
    <button type="submit" name="approve" class="btn btn-danger">Одобрить и удалить тест</button>
    <button type="submit" name="decline" class="btn btn-secondary">Отклонить запрос</button>
    <a href="{% url 'test_deletion_requests' %}" class="btn btn-link">Назад к списку запросов</a>
</form>
{% endblock %}

```

Contents of app/templates/add_user.html:
```
<!-- app/templates/add_user.html -->
{% extends 'base.html' %}

{% block title %}Добавить пользователя{% endblock %}

{% block content %}
<div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body">
        <h1 class="card-title">Добавить пользователя</h1>

        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Добавить пользователя</button>
            <!-- Условное отображение кнопки "Назад к списку пользователей" только для администраторов -->
            {% if role == 'admin' %}
                <a href="{% url 'user_list' %}" class="btn btn-secondary">Назад к списку пользователей</a>
            {% endif %}
        </form>
    </div>
</div>
{% endblock %}

```

Contents of app/templates/messages.html:
```
<!-- app/templates/messages.html -->
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Закрыть">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}
{% endif %}

```

Contents of app/templates/employee_detail.html:
```
<!-- app/templates/employee_detail.html -->
{% extends 'base.html' %}

{% block title %}Детали сотрудника{% endblock %}

{% block content %}
<div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body">
        <h1 class="card-title">Детали сотрудника</h1>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            {% if employee.photo %}
                <div class="mb-3">
                    <img src="{{ employee.photo.url }}" alt="Фотография сотрудника" class="img-thumbnail" style="max-width: 200px;">
                </div>
            {% endif %}
            <button type="submit" class="btn btn-primary">Сохранить</button>
            <!-- Условное отображение кнопки "Назад к списку сотрудников" только для администраторов -->
            {% if role == 'admin' %}
                <a href="{% url 'employee_list' %}" class="btn btn-secondary">Назад к списку сотрудников</a>
            {% endif %}
        </form>
    </div>
</div>
{% endblock %}

```

Contents of app/templates/test_list.html:
```
{% extends 'base.html' %}

{% block title %}Список тестов{% endblock %}

{% block content %}
<h1>Список тестов</h1>

<!-- Форма фильтрации -->
<form method="get" class="form-inline mb-3">
    <div class="form-group mr-2">
        <input type="text" name="search" class="form-control" placeholder="Поиск по названию или описанию" value="{{ request.GET.search }}">
    </div>
    <!-- Кнопка для добавления теста -->
    <a class="btn btn-success mr-2" href="{% url 'add_test' %}" role="button">Добавить тест</a>
    <button type="submit" class="btn btn-outline-primary">Поиск</button>
</form>

<table class="table table-hover" id="test-table">
    <thead class="thead-light">
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Описание</th>
            <th>Проходной балл</th>
            <th>Время на прохождение (мин)</th>
        </tr>
    </thead>
    <tbody>
        {% for test in page_obj.object_list %}
        <tr data-test-id="{{ test.id }}">
            <td>{{ test.id }}</td>
            <td>{{ test.title }}</td>
            <td>{{ test.description }}</td>
            <td>{{ test.passing_score }}</td>
            <td>{{ test.time_to_complete }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">Нет тестов</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Пагинация -->
<nav aria-label="Навигация по страницам">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Предыдущая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Предыдущая</span>
            </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li class="page-item active">
                    <span class="page-link">{{ num }}</span>
                </li>
            {% else %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ num }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">{{ num }}</a>
                </li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Следующая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Следующая</span>
            </li>
        {% endif %}
    </ul>
</nav>

<!-- Контекстное меню -->
<div id="context-menu" class="context-menu">
    <ul>
        <li data-action="start">Начать тест</li>
        {% if role == 'employee' or role == 'admin' %}
            <li data-action="test_edit">Редактировать тест</li>
        {% endif %}
        {% if role == 'employee' %}
            <li data-action="request_delete">Запросить удаление</li>
        {% endif %}
    </ul>
</div>

{% endblock %}

{% block extra_css %}
<style>
.context-menu {
    display: none;
    position: absolute;
    z-index: 1000;
    background: #fff;
    border: 1px solid #ccc;
}

.context-menu ul {
    list-style: none;
    padding: 5px 0;
    margin: 0;
}

.context-menu ul li {
    padding: 5px 20px;
    cursor: pointer;
}

.context-menu ul li:hover {
    background-color: #eee;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const table = document.getElementById('test-table');
    const contextMenu = document.getElementById('context-menu');
    let selectedTestId = null;

    table.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        const targetRow = e.target.closest('tr[data-test-id]');
        if (targetRow) {
            selectedTestId = targetRow.getAttribute('data-test-id');
            contextMenu.style.top = e.pageY + 'px';
            contextMenu.style.left = e.pageX + 'px';
            contextMenu.style.display = 'block';
        }
    });

    document.addEventListener('click', function(e) {
        if (!e.target.closest('#context-menu')) {
            contextMenu.style.display = 'none';
        }
    });

    contextMenu.addEventListener('click', function(e) {
        const action = e.target.getAttribute('data-action');
        if (action && selectedTestId) {
            if (action === 'start') {
                window.location.href = '{% url "start_test" 0 %}'.replace('0', selectedTestId);
            } else if (action === 'test_edit') {
                window.location.href = '{% url "edit_test" 0 %}'.replace('0', selectedTestId);
            } else if (action === 'request_delete') {
                window.location.href = '{% url "request_test_deletion" 0 %}'.replace('0', selectedTestId);
            }

            contextMenu.style.display = 'none';
        }
    });

});
</script>
{% endblock %}

```

Contents of app/templates/edit_answer.html:
```
{% extends 'base.html' %}
{% block title %}Редактирование ответа{% endblock %}
{% block content %}
<h1>Редактирование ответа к вопросу: {{ answer.question.question_text }}</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Сохранить</button>
    <a href="{% url 'edit_question' answer.question.id %}" class="btn btn-secondary">Назад</a>
</form>
{% endblock %}

```

Contents of app/templates/request_test_deletion.html:
```
<!-- app/templates/request_test_deletion.html -->
{% extends 'base.html' %}

{% block title %}Запрос на удаление теста{% endblock %}

{% block content %}
<h1>Запрос на удаление теста: {{ test.title }}</h1>
<p>Вы уверены, что хотите отправить запрос на удаление этого теста?</p>

<form method="post">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">Отправить запрос</button>
    <a href="{% url 'test_list' %}" class="btn btn-secondary">Отмена</a>
</form>
{% endblock %}

```

Contents of app/templates/user_list.html:
```
<!-- app/templates/user_list.html -->
{% extends 'base.html' %}

{% block title %}Список пользователей{% endblock %}

{% block content %}
<h1>Список пользователей</h1>
{% if role == 'admin' %}
    <a href="{% url 'add_user' %}" class="btn btn-success mb-3">Добавить пользователя</a>
{% endif %}

<!-- Форма фильтрации -->
<form method="get" class="form-inline mb-3">
    <div class="form-group mr-2">
        <input type="text" name="search" class="form-control" placeholder="Поиск по имени или email" value="{{ request.GET.search }}">
    </div>
    <button type="submit" class="btn btn-outline-primary">Поиск</button>
</form>

<table class="table table-hover" id="user-table">
    <thead class="thead-light">
        <tr>
            <th>ID</th>
            <th>ФИО</th>
            <th>Email</th>
            <th>Возраст</th>
            <th>Роль</th>
        </tr>
    </thead>
    <tbody>
        {% for user in page_obj.object_list %}
        <tr data-user-id="{{ user.id }}">
            <td>{{ user.id }}</td>
            <td>{{ user.full_name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.age }}</td>
            <td>{{ user.get_role_display }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">Нет пользователей</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Пагинация -->
<nav aria-label="Навигация по страницам">
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Предыдущая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Предыдущая</span>
            </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li class="page-item active">
                    <span class="page-link">{{ num }}</span>
                </li>
            {% else %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ num }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">{{ num }}</a>
                </li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}">Следующая</a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <span class="page-link">Следующая</span>
            </li>
        {% endif %}
    </ul>
</nav>

<!-- Контекстное меню -->
<div id="context-menu" class="context-menu">
    <ul>
        <li data-action="view">Просмотреть</li>
        <li data-action="edit">Редактировать</li>
        <li data-action="delete">Удалить</li>
    </ul>
</div>

{% endblock %}

{% block extra_css %}
<style>
.context-menu {
    display: none;
    position: absolute;
    z-index: 1000;
    background: #fff;
    border: 1px solid #ccc;
}

.context-menu ul {
    list-style: none;
    padding: 5px 0;
    margin: 0;
}

.context-menu ul li {
    padding: 5px 20px;
    cursor: pointer;
}

.context-menu ul li:hover {
    background-color: #eee;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const table = document.getElementById('user-table');
    const contextMenu = document.getElementById('context-menu');
    let selectedUserId = null;

    table.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        const targetRow = e.target.closest('tr[data-user-id]');
        if (targetRow) {
            selectedUserId = targetRow.getAttribute('data-user-id');
            contextMenu.style.top = e.pageY + 'px';
            contextMenu.style.left = e.pageX + 'px';
            contextMenu.style.display = 'block';
        }
    });

    document.addEventListener('click', function(e) {
        if (!e.target.closest('#context-menu')) {
            contextMenu.style.display = 'none';
        }
    });

    contextMenu.addEventListener('click', function(e) {
        const action = e.target.getAttribute('data-action');
        if (action && selectedUserId) {
            if (action === 'view' || action === 'edit') {
                window.location.href = '{% url "user_detail" 0 %}'.replace('0', selectedUserId);
            } else if (action === 'delete') {
                if (confirm('Вы уверены, что хотите удалить этого пользователя?')) {
                    window.location.href = '{% url "delete_user" 0 %}'.replace('0', selectedUserId);
                }
            }
            contextMenu.style.display = 'none';
        }
    });
});
</script>
{% endblock %}

```

Contents of myproject/asgi.py:
```
"""
ASGI config for myproject project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/4.2/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myproject.settings')

application = get_asgi_application()

```

Contents of myproject/__init__.py:
```

```

Contents of myproject/settings.py:
```
"""
Django settings for myproject project.

Generated by 'django-admin startproject' using Django 4.2.16.

For more information on this file, see
https://docs.djangoproject.com/en/4.2/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/4.2/ref/settings/
"""

from pathlib import Path

import os
from pathlib import Path
from dotenv import load_dotenv

load_dotenv()


# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/4.2/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = 'django-insecure-8pxo2$10!u8+1@w0bb3i&%o49#)wt!t99qnetr)^3n1p7%p@!c'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = []


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'bootstrap4',
    'app',
    'django_filters',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'myproject.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
                'app.context_processors.add_role_and_user_id',
            ],
        },
    },
]

WSGI_APPLICATION = 'myproject.wsgi.application'


# Database
# https://docs.djangoproject.com/en/4.2/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': os.getenv('DB_ENGINE', 'django.db.backends.postgresql'),
        'NAME': os.getenv('DB_NAME', 'DB'),
        'USER': os.getenv('DB_USER', 'postgres'),
        'PASSWORD': os.getenv('DB_PASSWORD', ''),
        'HOST': os.getenv('DB_HOST', 'localhost'),
        'PORT': os.getenv('DB_PORT', '5432'),
    }
}




# Password validation
# https://docs.djangoproject.com/en/4.2/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/4.2/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/4.2/howto/static-files/

STATIC_URL = 'static/'

LOGIN_URL = '/login/'
LOGIN_REDIRECT_URL = '/'  # Перенаправление после успешного входа
LOGOUT_REDIRECT_URL = '/login/'  # Перенаправление после выхода

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'
#AUTH_USER_MODEL = 'app.User'

# Default primary key field type
# https://docs.djangoproject.com/en/4.2/ref/settings/#default-auto-field

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

```

Contents of myproject/urls.py:
```
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('app.urls')),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

```

Contents of myproject/wsgi.py:
```
"""
WSGI config for myproject project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/4.2/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myproject.settings')

application = get_wsgi_application()

```

Contents of media/answer_images/4eb2b2b6962f9815f60feb4c27c84cd0.jpg:
```
[Could not decode file contents]

```

Contents of media/question_images/question4.jpg:
```
[Could not decode file contents]

```

Contents of media/question_images/photo_2024-10-16_17-27-22.jpg:
```
[Could not decode file contents]

```

Contents of media/question_images/question2.jpg:
```
[Could not decode file contents]

```

Contents of media/question_images/question3.jpg:
```
[Could not decode file contents]

```

Contents of media/question_images/question1.jpg:
```
[Could not decode file contents]

```

Contents of media/employee_photos/8dc817080af13b2aa733ea1c8ff606e6.jpg:
```
[Could not decode file contents]

```

